# Ooder Agent SDK 协议演变历史

> 本文档记录了从0.6.0到0.7.0版本的协议演变历史，作为协议整合的基础参考。

## 文档信息

- 版本：v0.7.0
- 创建日期：2026-02-15
- 状态：梳理中

---

## 一、版本概览

| 版本 | 发布代号 | 核心特性 | 协议文档数量 |
|------|----------|----------|--------------|
| 0.6.0 | - | 基础Skill协议 | 10 |
| 0.6.2 | - | 协议优化 | 10 |
| 0.6.3 | - | SDK集成 | 12 |
| 0.6.5 | Nexus | P2P网络协议 | 13 |
| 0.7.0 | - | 技能闭环设计 | 6（进行中） |

---

## 二、各版本协议结构

### 2.1 v0.6.0 协议结构

```
protocol-release/0.6.0/
├── agent/
│   └── agent-protocol.md          # Agent通信协议
├── ai-bridge/
│   └── ai-bridge-protocol.md      # AI桥接协议
├── general/
│   ├── document-directory.md      # 文档目录
│   ├── protocol-overview.md       # 协议概述
│   └── protocol-statement.md      # 协议声明
├── main/
│   └── protocol-main.md           # 主协议
├── skill/
│   ├── skill-protocol.md          # Skill协议
│   └── skill-vfs-protocol.md      # VFS协议
├── skill-implementation/
│   ├── deployment-guide.md        # 部署指南
│   ├── implementation-guide.md    # 实现指南
│   └── reference-code.md          # 参考代码
└── skill-spec/
    ├── skill-data-model.md        # 数据模型
    ├── skill-interface.md         # 接口定义
    └── skill-requirements.md      # 需求规格
```

### 2.2 v0.6.5 协议结构（新增P2P）

```
protocol-release/v0.6.5/
├── agent/
│   └── agent-protocol.md
├── ai-bridge/
│   └── ai-bridge-protocol.md
├── general/
│   ├── document-directory.md
│   ├── protocol-overview.md
│   └── protocol-statement.md
├── guide/
│   └── ooderai-agent-quickstart-guide.md  # 新增：快速入门指南
├── main/
│   └── protocol-main.md
├── p2p/
│   └── p2p-protocol.md            # 新增：P2P网络协议
├── sdk/
│   ├── SDK-Usage-Guide.md         # 新增：SDK使用指南
│   └── SDK-集成说明.md             # 新增：SDK集成说明
├── skill/
│   ├── skill-protocol.md
│   └── skill-vfs-protocol.md
├── skill-implementation/
│   ├── deployment-guide.md
│   ├── implementation-guide.md
│   └── reference-code.md
└── skill-spec/
    ├── skill-data-model.md
    ├── skill-interface.md
    └── skill-requirements.md
```

### 2.3 v0.7.0 协议结构（技能闭环）

```
protocol-release/v0.7.0/
├── agent/
│   └── agent-protocol.md          # 更新：广域网优化
├── ai-bridge/
│   └── ai-bridge-protocol.md
├── main/
│   └── protocol-main.md
├── p2p/
│   ├── p2p-protocol.md
│   └── sdk-p2p-wan-solution.md    # 新增：广域网解决方案
└── skill/
    ├── skill-discovery-protocol.md  # 新增：技能发现协议
    ├── skill-manifest-spec.md       # 新增：技能清单规范
    └── skill-package-protocol.md    # 新增：技能包协议
```

---

## 三、协议演变详情

### 3.1 Skill协议演变

| 版本 | 变更内容 | 影响 |
|------|----------|------|
| 0.6.0 | 基础Skill协议定义 | 定义Skill-Capability关系、注册接口、执行接口 |
| 0.6.2 | 协议优化 | 格式规范化、接口完善 |
| 0.6.5 | 无重大变更 | 保持兼容 |
| 0.7.0 | 技能闭环设计 | 新增发现协议、包协议、清单规范 |

### 3.2 Agent协议演变

| 版本 | 变更内容 | 影响 |
|------|----------|------|
| 0.6.0 | 基础Agent协议 | 定义MCP/Route/End三层架构 |
| 0.6.5 | 无重大变更 | 保持兼容 |
| 0.7.0 | 广域网优化 | 增强安全认证、支持跨网络通信 |

### 3.3 新增协议

| 版本 | 新增协议 | 用途 |
|------|----------|------|
| 0.6.3 | SDK使用指南 | SDK集成说明 |
| 0.6.5 | P2P协议 | 去中心化网络通信 |
| 0.7.0 | 技能发现协议 | 零配置技能发现 |
| 0.7.0 | 技能包协议 | 技能打包和分发 |
| 0.7.0 | 技能清单规范 | skill.yaml定义 |

---

## 四、协议内容对比

### 4.1 Skill注册接口对比

**v0.6.0:**
```json
{
  "skill_id": "string",
  "name": "string",
  "description": "string",
  "version": "string",
  "endpoints": [...],
  "capabilities": [...]
}
```

**v0.7.0:**
```
SKILL_REGISTER:{agentId};{skillId};{version};{skillType};{endpoint};{capabilities};{scenes};{timestamp};{signature}
```

**变化：**
1. 新增agentId字段
2. 新增skillType字段
3. 新增scenes字段
4. 新增timestamp和signature字段（安全增强）

### 4.2 Agent类型对比

| 版本 | Agent类型 | 描述 |
|------|-----------|------|
| 0.6.0 | MCP/Route/End | 三层架构定义 |
| 0.6.5 | MCP/Route/End + P2P节点 | 新增P2P角色 |
| 0.7.0 | MCP/Route/End + 场景组角色 | 新增PRIMARY/BACKUP角色 |

### 4.3 技能发现方式对比

| 版本 | 发现方式 | 说明 |
|------|----------|------|
| 0.6.0 | 注册中心 | 集中式注册发现 |
| 0.6.5 | P2P广播 | 去中心化发现 |
| 0.7.0 | 多协议发现 | UDP/DHT/SkillCenter/mDNS/本地 |

---

## 五、待整合内容

### 5.1 从0.6.x版本继承的内容

| 内容 | 来源版本 | 整合方式 |
|------|----------|----------|
| Skill-Capability关系 | 0.6.0 | 保留，扩展场景定义 |
| Agent三层架构 | 0.6.0 | 保留，新增场景组角色 |
| VFS协议 | 0.6.0 | 保留，扩展权限控制 |
| P2P网络协议 | 0.6.5 | 保留，整合到发现协议 |
| SDK使用指南 | 0.6.3 | 保留，更新到0.7.0 |

### 5.2 0.7.0新增内容

| 内容 | 文档 | 状态 |
|------|------|------|
| 技能发现协议 | skill-discovery-protocol.md | 已定义 |
| 技能包协议 | skill-package-protocol.md | 已定义 |
| 技能清单规范 | skill-manifest-spec.md | 已定义 |
| 场景定义规范 | 待创建 | 需补充 |
| 场景组协议 | 待创建 | 需补充 |
| 故障切换协议 | 待创建 | 需补充 |

### 5.3 今天讨论形成的内容

| 内容 | 文档 | 整合建议 |
|------|------|----------|
| 共识文档 | v0.7.0-skill-closed-loop-consensus.md | 独立成册，作为设计参考 |
| 术语定义规范 | v0.7.0-terminology-specification.md | 整合到protocol-overview.md |
| 流程分支规范 | v0.7.0-process-branch-specification.md | 整合到各协议文档 |
| 元数据规范 | v0.7.0-metadata-specification.md | 整合到skill-manifest-spec.md |
| 需求规格说明书 | v0.7.0-requirements-specification.md | 整合到skill-requirements.md |

---

## 六、协议整合计划

### 6.1 整合原则

1. **向后兼容**：保留0.6.x版本的核心概念和接口
2. **增量扩展**：新增内容作为扩展，不破坏现有结构
3. **文档归并**：避免重复，将相关内容合并
4. **版本标识**：明确标注各功能的引入版本

### 6.2 整合后的协议结构（建议）

```
protocol-release/v0.7.0/
├── general/
│   ├── protocol-overview.md       # 协议概述（整合术语定义）
│   ├── document-directory.md      # 文档目录
│   └── protocol-statement.md      # 协议声明
├── agent/
│   ├── agent-protocol.md          # Agent协议（整合故障切换）
│   └── scene-group-protocol.md    # 新增：场景组协议
├── p2p/
│   └── p2p-protocol.md            # P2P协议
├── skill/
│   ├── skill-protocol.md          # Skill协议（整合需求规格）
│   ├── skill-discovery-protocol.md # 技能发现协议
│   ├── skill-package-protocol.md  # 技能包协议
│   ├── skill-manifest-spec.md     # 技能清单规范（整合元数据）
│   ├── scene-definition-spec.md   # 新增：场景定义规范
│   └── skill-vfs-protocol.md      # VFS协议
├── sdk/
│   └── SDK-Usage-Guide.md         # SDK使用指南
└── guide/
    └── ooderai-agent-quickstart-guide.md  # 快速入门指南
```

### 6.3 整合步骤

1. **步骤一**：创建general/目录，整合协议概述和术语定义
2. **步骤二**：更新agent-protocol.md，整合故障切换机制
3. **步骤三**：创建scene-group-protocol.md，定义场景组协议
4. **步骤四**：更新skill-protocol.md，整合需求规格
5. **步骤五**：更新skill-manifest-spec.md，整合元数据规范
6. **步骤六**：创建scene-definition-spec.md，定义场景规范
7. **步骤七**：更新skill-discovery-protocol.md，整合流程分支

---

## 七、版本历史

| 版本 | 日期 | 变更说明 |
|------|------|----------|
| v0.1 | 2026-02-15 | 初始版本，记录协议演变历史 |
