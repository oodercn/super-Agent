# Ooder Agent SDK v0.7.0 开发计划

> 本文档定义了v0.7.0版本的详细开发计划，包括任务分解、优先级、时间估算和依赖关系。

## 文档信息

- 版本：v0.7.0
- 创建日期：2026-02-15
- 状态：规划中

---

## 一、项目概览

### 1.1 项目目标

实现技能闭环设计，支持技能的发现、安装、运行和故障切换全生命周期管理。

### 1.2 关键里程碑

| 里程碑 | 日期 | 交付物 |
|--------|------|--------|
| M1 | 2026-02-20 | 协议定稿、模块结构优化 |
| M2 | 2026-03-01 | SDK核心实现（API层+Core层） |
| M3 | 2026-03-10 | SkillCenter服务实现 |
| M4 | 2026-03-20 | 故障切换模块实现 |
| M5 | 2026-03-30 | 集成测试完成 |
| M6 | 2026-04-05 | 文档完善 |
| M7 | 2026-04-10 | 0.7.0正式版发布 |

---

## 二、开发任务分解

### 2.1 Phase 1: 基础设施层（1周）

#### 2.1.1 包结构重构

| 任务ID | 任务名称 | 优先级 | 预估时间 | 依赖 |
|--------|----------|--------|----------|------|
| T1.1.1 | 创建新包结构目录 | P0 | 2h | - |
| T1.1.2 | 迁移common模块（constants/enums/annotation） | P0 | 4h | T1.1.1 |
| T1.1.3 | 迁移infra.config模块 | P0 | 4h | T1.1.1 |
| T1.1.4 | 迁移infra.exception模块 | P0 | 4h | T1.1.1 |
| T1.1.5 | 迁移infra.utils模块 | P0 | 4h | T1.1.1 |
| T1.1.6 | 迁移infra.retry模块 | P1 | 2h | T1.1.1 |
| T1.1.7 | 迁移infra.async模块 | P1 | 2h | T1.1.1 |
| T1.1.8 | 创建兼容性别名 | P1 | 4h | T1.1.2-T1.1.7 |
| T1.1.9 | 更新单元测试 | P1 | 4h | T1.1.8 |

#### 2.1.2 新增基础设施

| 任务ID | 任务名称 | 优先级 | 预估时间 | 依赖 |
|--------|----------|--------|----------|------|
| T1.2.1 | 实现SDKException体系 | P0 | 4h | T1.1.4 |
| T1.2.2 | 实现ErrorCode枚举 | P0 | 2h | T1.2.1 |
| T1.2.3 | 实现ValidationUtils | P0 | 2h | T1.1.5 |
| T1.2.4 | 实现LifecycleManager | P1 | 4h | T1.1.7 |

---

### 2.2 Phase 2: API层实现（1周）

#### 2.2.1 Agent API

| 任务ID | 任务名称 | 优先级 | 预估时间 | 依赖 |
|--------|----------|--------|----------|------|
| T2.1.1 | 定义McpAgent接口 | P0 | 2h | T1.1.2 |
| T2.1.2 | 定义RouteAgent接口 | P0 | 2h | T1.1.2 |
| T2.1.3 | 定义EndAgent接口 | P0 | 2h | T1.1.2 |
| T2.1.4 | 定义AgentFactory接口 | P0 | 2h | T2.1.1-T2.1.3 |
| T2.1.5 | 定义AgentConfig模型 | P0 | 2h | T2.1.1-T2.1.3 |

#### 2.2.2 Skill API

| 任务ID | 任务名称 | 优先级 | 预估时间 | 依赖 |
|--------|----------|--------|----------|------|
| T2.2.1 | 定义SkillPackageManager接口 | P0 | 4h | T1.1.2 |
| T2.2.2 | 定义SkillRegistry接口 | P0 | 2h | T2.2.1 |
| T2.2.3 | 定义SkillInstaller接口 | P0 | 2h | T2.2.1 |
| T2.2.4 | 定义SkillCenterClient接口 | P0 | 2h | T2.2.1 |
| T2.2.5 | 定义SkillPackage模型 | P0 | 2h | T2.2.1 |
| T2.2.6 | 定义SkillIdentity模型 | P0 | 2h | T2.2.1 |
| T2.2.7 | 定义InstallRequest/Result模型 | P0 | 2h | T2.2.1 |

#### 2.2.3 Scene API

| 任务ID | 任务名称 | 优先级 | 预估时间 | 依赖 |
|--------|----------|--------|----------|------|
| T2.3.1 | 定义SceneGroupManager接口 | P0 | 4h | T1.1.2 |
| T2.3.2 | 定义SceneManager接口 | P0 | 2h | T2.3.1 |
| T2.3.3 | 定义CapabilityInvoker接口 | P0 | 2h | T2.3.1 |
| T2.3.4 | 定义SceneGroup模型 | P0 | 2h | T2.3.1 |
| T2.3.5 | 定义SceneGroupKey模型 | P0 | 2h | T2.3.1 |
| T2.3.6 | 定义SceneDefinition模型 | P0 | 2h | T2.3.2 |
| T2.3.7 | 定义Capability模型 | P0 | 2h | T2.3.3 |

#### 2.2.4 Metadata API（新增）

| 任务ID | 任务名称 | 优先级 | 预估时间 | 依赖 |
|--------|----------|--------|----------|------|
| T2.4.1 | 定义MetadataQueryService接口 | P0 | 2h | T1.1.2 |
| T2.4.2 | 定义ChangeLogService接口 | P0 | 2h | T1.1.2 |
| T2.4.3 | 定义FourDimensionMetadata模型 | P0 | 2h | T2.4.1 |
| T2.4.4 | 定义ChangeRecord模型 | P0 | 2h | T2.4.2 |

#### 2.2.5 SDK主入口

| 任务ID | 任务名称 | 优先级 | 预估时间 | 依赖 |
|--------|----------|--------|----------|------|
| T2.5.1 | 实现OoderSDK主入口类 | P0 | 4h | T2.1-T2.4 |
| T2.5.2 | 实现SDKBuilder模式 | P0 | 2h | T2.5.1 |
| T2.5.3 | 编写API层单元测试 | P1 | 4h | T2.5.2 |

---

### 2.3 Phase 3: Core层实现（2周）

#### 2.3.1 Agent核心实现

| 任务ID | 任务名称 | 优先级 | 预估时间 | 依赖 |
|--------|----------|--------|----------|------|
| T3.1.1 | 实现McpAgentImpl | P0 | 8h | T2.1.1 |
| T3.1.2 | 实现RouteAgentImpl | P0 | 8h | T2.1.2 |
| T3.1.3 | 实现EndAgentImpl | P0 | 8h | T2.1.3 |
| T3.1.4 | 实现AgentFactoryImpl | P0 | 4h | T3.1.1-T3.1.3 |
| T3.1.5 | 实现AgentState管理 | P1 | 4h | T3.1.1-T3.1.3 |
| T3.1.6 | 编写Agent核心单元测试 | P1 | 4h | T3.1.1-T3.1.5 |

#### 2.3.2 Skill核心实现

| 任务ID | 任务名称 | 优先级 | 预估时间 | 依赖 |
|--------|----------|--------|----------|------|
| T3.2.1 | 实现SkillPackageManagerImpl | P0 | 8h | T2.2.1 |
| T3.2.2 | 实现LocalSkillRegistry | P0 | 4h | T2.2.2 |
| T3.2.3 | 实现LocalSkillInstaller | P0 | 8h | T2.2.3 |
| T3.2.4 | 实现SkillDiscoverer基类 | P0 | 4h | T2.2.1 |
| T3.2.5 | 实现UdpDiscoverer | P0 | 4h | T3.2.4 |
| T3.2.6 | 实现DhtDiscoverer | P1 | 8h | T3.2.4 |
| T3.2.7 | 实现SkillCenterDiscoverer | P0 | 4h | T3.2.4 |
| T3.2.8 | 实现LocalDiscoverer | P0 | 2h | T3.2.4 |
| T3.2.9 | 实现InstallPipeline | P0 | 8h | T3.2.3 |
| T3.2.10 | 实现RollbackManager | P0 | 4h | T3.2.9 |
| T3.2.11 | 实现SkillLifecycle | P1 | 4h | T3.2.1 |
| T3.2.12 | 编写Skill核心单元测试 | P1 | 8h | T3.2.1-T3.2.11 |

#### 2.3.3 Scene核心实现

| 任务ID | 任务名称 | 优先级 | 预估时间 | 依赖 |
|--------|----------|--------|----------|------|
| T3.3.1 | 实现SceneGroupManagerImpl | P0 | 8h | T2.3.1 |
| T3.3.2 | 实现SceneManagerImpl | P0 | 4h | T2.3.2 |
| T3.3.3 | 实现SceneGroup模型 | P0 | 4h | T2.3.4 |
| T3.3.4 | 实现SceneGroupKey管理 | P0 | 4h | T2.3.5 |
| T3.3.5 | 实现KeyShareManager | P0 | 8h | T3.3.4 |
| T3.3.6 | 实现FailoverManager | P0 | 8h | T3.3.1 |
| T3.3.7 | 实现HeartbeatMonitor | P0 | 4h | T3.3.6 |
| T3.3.8 | 实现RoleChanger | P0 | 4h | T3.3.6 |
| T3.3.9 | 实现CapabilityRegistry | P0 | 4h | T2.3.7 |
| T3.3.10 | 实现CapabilityInvoker | P0 | 4h | T2.3.3 |
| T3.3.11 | 编写Scene核心单元测试 | P1 | 8h | T3.3.1-T3.3.10 |

#### 2.3.4 Metadata核心实现

| 任务ID | 任务名称 | 优先级 | 预估时间 | 依赖 |
|--------|----------|--------|----------|------|
| T3.4.1 | 实现MetadataQueryServiceImpl | P0 | 4h | T2.4.1 |
| T3.4.2 | 实现ChangeLogServiceImpl | P0 | 4h | T2.4.2 |
| T3.4.3 | 实现FourDimensionMetadata构建 | P0 | 4h | T2.4.3 |
| T3.4.4 | 实现ChangeRecord持久化 | P0 | 4h | T2.4.4 |
| T3.4.5 | 实现MetadataObserver | P1 | 4h | T3.4.1 |
| T3.4.6 | 编写Metadata核心单元测试 | P1 | 4h | T3.4.1-T3.4.5 |

#### 2.3.5 Command系统迁移

| 任务ID | 任务名称 | 优先级 | 预估时间 | 依赖 |
|--------|----------|--------|----------|------|
| T3.5.1 | 迁移Command API | P0 | 4h | T1.1.2 |
| T3.5.2 | 迁移CommandExecutor | P0 | 4h | T3.5.1 |
| T3.5.3 | 迁移CommandTask实现 | P0 | 8h | T3.5.2 |
| T3.5.4 | 新增SceneGroup相关Command | P0 | 4h | T3.3.1 |
| T3.5.5 | 新增Failover相关Command | P0 | 4h | T3.3.6 |
| T3.5.6 | 编写Command系统单元测试 | P1 | 4h | T3.5.1-T3.5.5 |

---

### 2.4 Phase 4: Service层实现（1.5周）

#### 2.4.1 Network服务

| 任务ID | 任务名称 | 优先级 | 预估时间 | 依赖 |
|--------|----------|--------|----------|------|
| T4.1.1 | 迁移UDP服务 | P0 | 4h | T3.1 |
| T4.1.2 | 迁移LinkManager | P0 | 4h | T3.1 |
| T4.1.3 | 迁移RouteManager | P0 | 4h | T3.1 |
| T4.1.4 | 实现P2P DHT节点 | P1 | 8h | T3.2.6 |
| T4.1.5 | 实现GossipProtocol | P1 | 4h | T4.1.4 |
| T4.1.6 | 编写Network服务单元测试 | P1 | 4h | T4.1.1-T4.1.5 |

#### 2.4.2 Storage服务

| 任务ID | 任务名称 | 优先级 | 预估时间 | 依赖 |
|--------|----------|--------|----------|------|
| T4.2.1 | 迁移VFS服务 | P0 | 4h | T3.1 |
| T4.2.2 | 迁移Persistence服务 | P0 | 4h | T3.1 |
| T4.2.3 | 实现VfsPermission管理 | P0 | 4h | T3.3.4 |
| T4.2.4 | 实现CacheManager | P1 | 4h | T4.2.1 |
| T4.2.5 | 编写Storage服务单元测试 | P1 | 4h | T4.2.1-T4.2.4 |

#### 2.4.3 Security服务

| 任务ID | 任务名称 | 优先级 | 预估时间 | 依赖 |
|--------|----------|--------|----------|------|
| T4.3.1 | 迁移AuthManager | P0 | 4h | T3.1 |
| T4.3.2 | 实现KeyManager | P0 | 4h | T3.3.5 |
| T4.3.3 | 实现KeyShare（Shamir） | P0 | 8h | T4.3.2 |
| T4.3.4 | 实现CertificateManager | P0 | 4h | T4.3.2 |
| T4.3.5 | 实现SceneCA | P0 | 4h | T4.3.4 |
| T4.3.6 | 迁移PermissionManager | P0 | 4h | T3.1 |
| T4.3.7 | 编写Security服务单元测试 | P1 | 4h | T4.3.1-T4.3.6 |

#### 2.4.4 Monitoring服务

| 任务ID | 任务名称 | 优先级 | 预估时间 | 依赖 |
|--------|----------|--------|----------|------|
| T4.4.1 | 迁移HealthMonitor | P0 | 4h | T3.1 |
| T4.4.2 | 迁移MetricsCollector | P0 | 4h | T3.1 |
| T4.4.3 | 迁移AlertManager | P0 | 4h | T3.1 |
| T4.4.4 | 编写Monitoring服务单元测试 | P1 | 4h | T4.4.1-T4.4.3 |

---

### 2.5 Phase 5: SkillCenter服务实现（1周）

| 任务ID | 任务名称 | 优先级 | 预估时间 | 依赖 |
|--------|----------|--------|----------|------|
| T5.1 | 实现SkillCenter REST API | P0 | 8h | T3.2 |
| T5.2 | 实现技能注册服务 | P0 | 4h | T5.1 |
| T5.3 | 实现技能发现服务 | P0 | 4h | T5.1 |
| T5.4 | 实现版本管理服务 | P0 | 4h | T5.1 |
| T5.5 | 实现场景组管理服务 | P0 | 4h | T3.3 |
| T5.6 | 实现远程部署服务 | P0 | 8h | T5.1 |
| T5.7 | 实现多技能协同服务 | P1 | 8h | T5.5 |
| T5.8 | 编写SkillCenter集成测试 | P1 | 8h | T5.1-T5.7 |

---

### 2.6 Phase 6: 集成测试（1周）

| 任务ID | 任务名称 | 优先级 | 预估时间 | 依赖 |
|--------|----------|--------|----------|------|
| T6.1 | 技能发现集成测试 | P0 | 4h | T3.2 |
| T6.2 | 技能安装集成测试 | P0 | 4h | T3.2 |
| T6.3 | 场景组集成测试 | P0 | 4h | T3.3 |
| T6.4 | 故障切换集成测试 | P0 | 8h | T3.3 |
| T6.5 | 元数据可观测性测试 | P0 | 4h | T3.4 |
| T6.6 | 性能测试 | P0 | 8h | T6.1-T6.5 |
| T6.7 | 安全测试 | P0 | 4h | T6.1-T6.5 |
| T6.8 | 兼容性测试 | P1 | 4h | T6.1-T6.5 |

---

### 2.7 Phase 7: 文档完善（0.5周）

| 任务ID | 任务名称 | 优先级 | 预估时间 | 依赖 |
|--------|----------|--------|----------|------|
| T7.1 | 更新API文档 | P0 | 4h | T2.1-T2.5 |
| T7.2 | 更新用户指南 | P0 | 4h | T3.1-T3.5 |
| T7.3 | 更新部署指南 | P0 | 2h | T5.1-T5.8 |
| T7.4 | 编写迁移指南 | P0 | 4h | T1.1 |
| T7.5 | 编写故障排除指南 | P1 | 4h | T6.1-T6.8 |

---

## 三、任务依赖图

```
T1.1.1 ─┬─▶ T1.1.2 ─┬─▶ T2.1.1 ─▶ T3.1.1 ─┐
        │           │                      │
        ├─▶ T1.1.3 ─┤                      ├─▶ T4.1.1 ─▶ T6.1
        │           │                      │
        ├─▶ T1.1.4 ─┼─▶ T2.2.1 ─▶ T3.2.1 ─┤
        │           │                      │
        ├─▶ T1.1.5 ─┤                      ├─▶ T4.2.1 ─▶ T6.2
        │           │                      │
        ├─▶ T1.1.6 ─┼─▶ T2.3.1 ─▶ T3.3.1 ─┤
        │           │                      │
        ├─▶ T1.1.7 ─┤                      ├─▶ T4.3.1 ─▶ T6.3
        │           │                      │
        └─▶ T1.2.1 ─┴─▶ T2.4.1 ─▶ T3.4.1 ─┘
                                              │
                                              └─▶ T6.4 ─▶ T6.6 ─▶ T7.1-T7.5
```

---

## 四、资源分配

### 4.1 团队配置

| 角色 | 人数 | 职责 |
|------|------|------|
| 架构师 | 1 | 技术决策、代码审查 |
| 后端开发 | 3 | 核心功能实现 |
| 测试工程师 | 1 | 测试用例编写、自动化测试 |
| 文档工程师 | 1 | 文档编写和维护 |

### 4.2 任务分配建议

| 开发人员 | 主要负责模块 |
|----------|--------------|
| 开发A | Agent核心、Command系统 |
| 开发B | Skill核心、Discovery |
| 开发C | Scene核心、Failover、Metadata |

---

## 五、风险管理

| 风险 | 概率 | 影响 | 缓解措施 |
|------|------|------|----------|
| 协议变更 | 中 | 高 | 冻结协议，变更需评审 |
| 技术难点 | 中 | 中 | 提前技术预研 |
| 人员变动 | 低 | 高 | 文档完善，知识共享 |
| 进度延迟 | 中 | 中 | 预留缓冲时间 |

---

## 六、版本历史

| 版本 | 日期 | 变更说明 |
|------|------|----------|
| v0.1 | 2026-02-15 | 初始版本，开发计划 |
