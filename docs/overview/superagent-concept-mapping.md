# SuperAgent概念映射

## 文档版本
0.51

## 核心概念映射

| SuperAgent概念 | 描述 |
|---------------|------|
| **用户（User）** | 系统的使用者，可以是个人或组织 |
| **角色（Role）** | 用户在系统中扮演的角色，决定了操作权限 |
| **MCPAgent** | 服务流入口，管理和协调其他agent，用户可以拥有多个 |
| **RouteAgent** | 负责桥接和转发，连接MCPAgent和EndAgent |
| **EndAgent** | 独立功能模块，执行具体任务 |
| **Skill** | 物理程序，具有唯一标识，可被管理和控制，提供特定功能 |
| **SkillInterface** | Skill的对外接口，映射到具体的Capability |
| **Skillflow** | 多个agent协作完成的服务流程，定义了执行步骤和逻辑 |
| **AgentRegistry** | 管理所有agent的注册、发现和状态 |
| **SkillRegistry** | 管理所有skill的注册、分类和状态 |

## 用户与MCPAgent关系设计

### 用户角色

| 角色类型 | 描述 | 权限范围 |
|---------|------|--------|
| **个人用户** | 普通个人使用者 | 拥有私有MCPAgent，可自助管理 |
| **公司经理** | 公司管理层用户 | 拥有公司MCPAgent，可管理公司资源 |
| **项目经理** | 项目负责人 | 拥有项目MCPAgent，管理项目相关资源 |
| **普通员工** | 公司普通员工 | 可绑定已有公司MCPAgent，受限操作 |

### MCPAgent类型

| MCPAgent类型 | 描述 | 管理权限 |
|-------------|------|--------|
| **个人私有** | 用户个人拥有的MCPAgent | 完全自助管理：注册、绑定、删除、skillflow定义、skill添加移除等 |
| **公司所有** | 公司拥有的MCPAgent | 需预授权：部分操作需审批，普通员工只能绑定/解绑 |
| **项目所有** | 项目拥有的MCPAgent | 项目经理可管理，团队成员可绑定/解绑 |

### MCPAgent操作权限

| 操作 | 个人私有MCP | 公司MCP（经理） | 公司MCP（员工） | 项目MCP（经理） | 项目MCP（成员） |
|-----|------------|---------------|---------------|---------------|---------------|
| 注册MCP | ✅ | ✅ | ❌ | ✅ | ❌ |
| 绑定MCP | ✅ | ✅ | ✅ | ✅ | ✅ |
| 解绑MCP | ✅ | ✅ | ✅ | ✅ | ✅ |
| 删除MCP | ✅ | ✅ | ❌ | ✅ | ❌ |
| 定义Skillflow | ✅ | ✅ | ❌ | ✅ | ❌ |
| 添加Skill | ✅ | ✅（需授权） | ❌ | ✅（需授权） | ❌ |
| 移除Skill | ✅ | ✅（需授权） | ❌ | ✅（需授权） | ❌ |
| 执行Skillflow | ✅ | ✅ | ✅ | ✅ | ✅ |
| 监控MCP | ✅ | ✅ | ✅（受限） | ✅ | ✅（受限） |

### MCPAgent绑定流程

#### 个人私有MCP绑定
```
1. 用户 → 注册请求 → MCPAgent注册中心
2. MCPAgent注册中心 → 验证用户身份 → 创建MCPAgent
3. MCPAgent注册中心 → 返回MCPAgent信息 → 用户
4. 用户 → 自动绑定新创建的MCPAgent
```

#### 公司MCP绑定
```
1. 用户 → 绑定请求 → MCPAgent注册中心
2. MCPAgent注册中心 → 验证用户身份和权限 → 检查MCPAgent状态
3. 公司管理员 → 审批绑定请求（如需）
4. MCPAgent注册中心 → 建立绑定关系 → 通知用户
5. 用户 → 获得MCPAgent访问权限
```

## 系统架构映射

| SuperAgent组件 | 功能 |
|---------------|------|
| **Auth认证中心** | 负责系统的认证和授权管理，包括用户认证、设备认证、权限管理等 |
| **DataServer数据中心** | 管理系统的所有数据，包括配置数据、状态数据、历史数据等 |
| **Skill能力管理中心** | 管理所有skill的注册、分类、发现和状态监控，支持skill的1:n Capability关系定义 |
| **LLM调度中心** | 负责大语言模型的调度和管理，包括模型选择、请求分发、响应处理等 |
| **Skillflow调度中心** | 管理服务流的定义、执行和监控，包括服务流的解析、步骤调度、状态管理等 |

## 设计原则

1. **模块化设计**：各组件职责清晰，便于扩展和维护
2. **松耦合**：组件间通过接口通信，降低依赖
3. **可扩展性**：支持新增agent类型、skill功能和用户角色
4. **可靠性**：具备容错和恢复机制
5. **安全性**：支持认证、授权和加密通信
6. **可监控性**：支持监控agent、skill和用户操作
7. **灵活权限**：基于角色的细粒度权限控制

## 后续工作

1. 等待用户明确指令后，继续完成系统架构设计
2. 根据最终概念映射，完成详细设计文档
3. 实现核心组件和功能
4. 测试和验证系统功能

**注意**：根据用户明确指令，已完成系统架构设计和详细设计文档的编写。