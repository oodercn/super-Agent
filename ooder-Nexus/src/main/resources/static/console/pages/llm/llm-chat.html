<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI 智能对话 - Nexus Console</title>
    
    <link rel="stylesheet" href="/console/css/remixicon/remixicon.css">
    <link rel="stylesheet" href="/console/css/nexus.css">
    <style>
        .chat-container { display: flex; flex-direction: column; height: calc(100vh - 120px); }
        .chat-header { display: flex; justify-content: space-between; align-items: center; padding: 12px 16px; border-bottom: 1px solid var(--nx-border-color); }
        .chat-title { display: flex; align-items: center; gap: 8px; font-weight: 600; }
        .chat-controls { display: flex; align-items: center; gap: 12px; }
        .model-selector select { padding: 6px 12px; border-radius: 6px; border: 1px solid var(--nx-border-color); background: var(--nx-bg-color); color: var(--nx-text-color); }
        .chat-messages { flex: 1; overflow-y: auto; padding: 16px; }
        .welcome-message { text-align: center; padding: 40px; color: var(--nx-text-secondary); }
        .welcome-icon { font-size: 48px; margin-bottom: 16px; }
        .quick-actions { display: flex; gap: 12px; justify-content: center; margin-top: 24px; flex-wrap: wrap; }
        .quick-action-btn { display: flex; align-items: center; gap: 8px; padding: 10px 16px; border-radius: 8px; border: 1px solid var(--nx-border-color); background: var(--nx-bg-color); cursor: pointer; transition: all 0.2s; }
        .quick-action-btn:hover { background: var(--nx-primary-color); color: white; border-color: var(--nx-primary-color); }
        .chat-input-area { padding: 16px; border-top: 1px solid var(--nx-border-color); }
        .input-container { display: flex; gap: 12px; }
        .input-container textarea { flex: 1; padding: 12px; border-radius: 8px; border: 1px solid var(--nx-border-color); background: var(--nx-bg-color); color: var(--nx-text-color); resize: none; }
        .input-hint { margin-top: 8px; font-size: 12px; color: var(--nx-text-secondary); }
        .message { margin-bottom: 16px; padding: 12px 16px; border-radius: 8px; max-width: 80%; }
        .message.user { background: var(--nx-primary-color); color: white; margin-left: auto; }
        .message.assistant { background: var(--nx-bg-secondary); }
        .settings-modal { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 1000; }
        .modal-content { background: var(--nx-bg-color); border-radius: 12px; width: 400px; max-width: 90%; }
        .modal-header { display: flex; justify-content: space-between; align-items: center; padding: 16px; border-bottom: 1px solid var(--nx-border-color); }
        .modal-body { padding: 16px; }
        .modal-footer { display: flex; justify-content: flex-end; gap: 12px; padding: 16px; border-top: 1px solid var(--nx-border-color); }
        .form-group { margin-bottom: 16px; }
        .form-group label { display: block; margin-bottom: 8px; font-weight: 500; }
        .form-group input, .form-group textarea { width: 100%; padding: 8px 12px; border-radius: 6px; border: 1px solid var(--nx-border-color); background: var(--nx-bg-color); color: var(--nx-text-color); }
    </style>
</head>
<body>
    <div class="nx-page">
        <aside class="nx-page__sidebar">
            <div class="nx-p-4 nx-mb-4">
                <h1 class="nx-text-lg nx-font-bold" style="display: flex; align-items: center; gap: 8px;">
                    <i class="ri-server-line"></i> Nexus Console
                </h1>
            </div>
            <ul class="nav-menu" id="nav-menu"></ul>
        </aside>
        
        <main class="nx-page__content">
            <header class="nx-page__header">
                <div class="nx-flex nx-items-center nx-gap-3">
                    <button class="nx-btn nx-btn--ghost nx-btn--icon" data-nx-sidebar-toggle>
                        <i class="ri-menu-line"></i>
                    </button>
                    <h2 class="nx-text-lg nx-font-semibold">AI 智能对话</h2>
                </div>
                <div class="nx-flex nx-items-center nx-gap-3">
                    <button class="nx-btn nx-btn--ghost nx-btn--icon" data-nx-theme-toggle>
                        <i class="ri-sun-line"></i>
                    </button>
                </div>
            </header>
            
            <div class="nx-page__main">
                <div class="nx-container">
                    <div class="chat-container">
                        <div class="chat-header">
                            <div class="chat-title">
                                <i class="ri-robot-line"></i>
                                <span>AI 智能对话</span>
                            </div>
                            <div class="chat-controls">
                                <div class="model-selector">
                                    <label>模型:</label>
                                    <select id="model-select">
                                        <option value="">加载中...</option>
                                    </select>
                                </div>
                                <div class="token-stats">
                                    <span>Token:</span>
                                    <span id="token-count">0</span>
                                </div>
                                <button class="nx-btn nx-btn--ghost nx-btn--sm" id="clear-btn" title="清空对话">
                                    <i class="ri-delete-bin-line"></i>
                                </button>
                                <button class="nx-btn nx-btn--ghost nx-btn--sm" id="settings-btn" title="设置">
                                    <i class="ri-settings-3-line"></i>
                                </button>
                            </div>
                        </div>

                        <div class="chat-messages" id="chat-messages">
                            <div class="welcome-message">
                                <div class="welcome-icon">
                                    <i class="ri-robot-line"></i>
                                </div>
                                <h2>欢迎使用 AI 智能对话</h2>
                                <p>选择模型后开始对话，支持流式输出和多种 AI 能力</p>
                                <div class="quick-actions">
                                    <button class="quick-action-btn" data-prompt="帮我写一段代码">
                                        <i class="ri-code-line"></i>
                                        <span>写代码</span>
                                    </button>
                                    <button class="quick-action-btn" data-prompt="帮我分析这个问题">
                                        <i class="ri-lightbulb-line"></i>
                                        <span>分析问题</span>
                                    </button>
                                    <button class="quick-action-btn" data-prompt="帮我翻译这段文字">
                                        <i class="ri-translate-2"></i>
                                        <span>翻译</span>
                                    </button>
                                    <button class="quick-action-btn" data-prompt="帮我总结这段内容">
                                        <i class="ri-file-list-3-line"></i>
                                        <span>总结</span>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="chat-input-area">
                            <div class="input-container">
                                <textarea 
                                    id="chat-input" 
                                    placeholder="输入消息，按 Enter 发送，Shift+Enter 换行..."
                                    rows="2"
                                ></textarea>
                                <button class="nx-btn nx-btn--primary" id="send-btn" disabled>
                                    <i class="ri-send-plane-fill"></i>
                                    <span>发送</span>
                                </button>
                            </div>
                            <div class="input-hint">
                                <span id="char-count">0</span> 字符 | 
                                <span id="stream-status">就绪</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <div class="settings-modal" id="settings-modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>对话设置</h3>
                <button class="nx-btn nx-btn--ghost nx-btn--icon nx-btn--sm" id="close-settings">
                    <i class="ri-close-line"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>系统提示词</label>
                    <textarea id="system-prompt" rows="4" placeholder="设置 AI 的角色和行为..."></textarea>
                </div>
                <div class="form-group">
                    <label>温度 (Temperature)</label>
                    <input type="range" id="temperature" min="0" max="1" step="0.1" value="0.7">
                    <span id="temperature-value">0.7</span>
                </div>
                <div class="form-group">
                    <label>最大 Token 数</label>
                    <input type="number" id="max-tokens" value="2048" min="100" max="8192">
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="stream-enabled" checked>
                        启用流式输出
                    </label>
                </div>
            </div>
            <div class="modal-footer">
                <button class="nx-btn nx-btn--secondary" id="reset-settings">重置</button>
                <button class="nx-btn nx-btn--primary" id="save-settings">保存</button>
            </div>
        </div>
    </div>
    
    <script src="/console/js/nexus.js"></script>
    <script src="/console/js/nexus-menu.js"></script>
    <script src="/console/js/page-init.js" data-auto-init></script>
    <script src="/console/js/pages/llm-chat.js"></script>
</body>
</html>
