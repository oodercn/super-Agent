<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>我的设备 - Nexus</title>
    <link rel="stylesheet" href="/console/css/remixicon/remixicon.css">
    <link rel="stylesheet" href="/console/css/nexus.css">
    <style>
        .device-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 16px; }
        .device-card { background: var(--ns-card-bg); border: 1px solid var(--ns-border); border-radius: 8px; padding: 20px; }
        .device-card.current { border-color: var(--nx-primary); }
        .device-header { display: flex; align-items: flex-start; gap: 12px; margin-bottom: 16px; }
        .device-icon { width: 48px; height: 48px; border-radius: 10px; background: linear-gradient(135deg, var(--nx-primary), #6366f1); display: flex; align-items: center; justify-content: center; font-size: 24px; color: white; }
        .device-icon.mobile { background: linear-gradient(135deg, var(--ns-success), #22c55e); }
        .device-icon.tablet { background: linear-gradient(135deg, var(--ns-warning), #f59e0b); }
        .device-title { flex: 1; }
        .device-name { font-size: 16px; font-weight: 600; color: var(--ns-dark); margin-bottom: 4px; }
        .device-type { font-size: 12px; color: var(--ns-secondary); }
        .device-status { display: inline-flex; align-items: center; gap: 4px; padding: 4px 8px; border-radius: 4px; font-size: 11px; }
        .device-status.online { background: rgba(34, 197, 94, 0.1); color: var(--ns-success); }
        .device-status.offline { background: rgba(107, 114, 128, 0.1); color: var(--ns-secondary); }
        
        .device-info { margin-bottom: 16px; }
        .device-info-item { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid var(--ns-border); font-size: 13px; }
        .device-info-item:last-child { border-bottom: none; }
        .device-info-label { color: var(--ns-secondary); }
        .device-info-value { color: var(--ns-dark); }
        
        .device-actions { display: flex; gap: 8px; }
    </style>
</head>
<body>
    <div class="nx-page">
        <aside class="nx-page__sidebar">
            <div class="nx-p-4 nx-mb-4">
                <h1 class="nx-text-lg nx-font-bold" style="display: flex; align-items: center; gap: 8px;">
                    <i class="ri-server-line"></i> Nexus Console
                </h1>
            </div>
            <ul class="nav-menu" id="nav-menu"></ul>
        </aside>
        
        <main class="nx-page__content">
            <header class="nx-page__header">
                <div class="nx-flex nx-items-center nx-gap-3">
                    <button class="nx-btn nx-btn--ghost nx-btn--icon" data-nx-sidebar-toggle>
                        <i class="ri-menu-line"></i>
                    </button>
                    <h2 class="nx-text-lg nx-font-semibold">我的设备</h2>
                </div>
                <div class="nx-flex nx-items-center nx-gap-3">
                    <button class="nx-btn nx-btn--primary" onclick="addDevice()">
                        <i class="ri-add-line"></i> 添加设备
                    </button>
                    <button class="nx-btn nx-btn--ghost nx-btn--icon" data-nx-theme-toggle>
                        <i class="ri-sun-line"></i>
                    </button>
                </div>
            </header>
            
            <div class="nx-page__main">
                <div class="nx-container">
                    <div class="device-grid" id="deviceGrid">
                    </div>
                </div>
            </div>
        </main>
    </div>
    
    <script src="/console/js/nexus.js"></script>
    <script src="/console/js/nexus-menu.js"></script>
    <script src="/console/js/page-init.js" data-auto-init></script>
    <script>
        var devices = [
            { id: 'dev-001', name: 'Windows PC', type: 'desktop', os: 'Windows 11', location: '北京', lastActive: Date.now(), online: true, current: true },
            { id: 'dev-002', name: 'iPhone 15', type: 'mobile', os: 'iOS 17.2', location: '上海', lastActive: Date.now() - 7200000, online: true, current: false },
            { id: 'dev-003', name: 'iPad Pro', type: 'tablet', os: 'iPadOS 17', location: '北京', lastActive: Date.now() - 86400000, online: false, current: false },
            { id: 'dev-004', name: 'MacBook Pro', type: 'desktop', os: 'macOS 14', location: '深圳', lastActive: Date.now() - 172800000, online: false, current: false }
        ];
        
        window.onPageInit = function() {
            renderDevices();
        };
        
        function renderDevices() {
            var container = document.getElementById('deviceGrid');
            var html = '';
            
            devices.forEach(function(device) {
                var iconClass = device.type === 'mobile' ? 'mobile' : (device.type === 'tablet' ? 'tablet' : '');
                var icon = device.type === 'mobile' ? 'ri-smartphone-line' : (device.type === 'tablet' ? 'ri-tablet-line' : 'ri-computer-line');
                
                html += '<div class="device-card' + (device.current ? ' current' : '') + '">' +
                    '<div class="device-header">' +
                    '<div class="device-icon ' + iconClass + '"><i class="' + icon + '"></i></div>' +
                    '<div class="device-title">' +
                    '<div class="device-name">' + device.name + '</div>' +
                    '<div class="device-type">' + device.os + '</div>' +
                    '</div>' +
                    '<span class="device-status ' + (device.online ? 'online' : 'offline') + '">' +
                    '<i class="ri-checkbox-blank-circle-fill" style="font-size:8px;"></i> ' +
                    (device.online ? '在线' : '离线') +
                    '</span>' +
                    '</div>' +
                    '<div class="device-info">' +
                    '<div class="device-info-item"><span class="device-info-label">位置</span><span class="device-info-value">' + device.location + '</span></div>' +
                    '<div class="device-info-item"><span class="device-info-label">最后活动</span><span class="device-info-value">' + formatTime(device.lastActive) + '</span></div>' +
                    '<div class="device-info-item"><span class="device-info-label">设备ID</span><span class="device-info-value">' + device.id + '</span></div>' +
                    '</div>' +
                    '<div class="device-actions">' +
                    (device.current ? '<button class="nx-btn nx-btn--primary nx-btn--sm" disabled>当前设备</button>' : 
                    '<button class="nx-btn nx-btn--ghost nx-btn--sm" onclick="removeDevice(\'' + device.id + '\')">移除</button>') +
                    '</div>' +
                    '</div>';
            });
            
            container.innerHTML = html;
        }
        
        function addDevice() {
            alert('请在新设备上访问 Nexus 并登录');
        }
        
        function removeDevice(deviceId) {
            if (confirm('确定要移除此设备吗？移除后该设备需要重新登录。')) {
                devices = devices.filter(function(d) { return d.id !== deviceId; });
                renderDevices();
            }
        }
        
        function formatTime(timestamp) {
            var now = Date.now();
            var diff = now - timestamp;
            
            if (diff < 60000) return '刚刚';
            if (diff < 3600000) return Math.floor(diff / 60000) + '分钟前';
            if (diff < 86400000) return Math.floor(diff / 3600000) + '小时前';
            if (diff < 604800000) return Math.floor(diff / 86400000) + '天前';
            
            var d = new Date(timestamp);
            return d.getFullYear() + '-' + (d.getMonth() + 1).toString().padStart(2, '0') + '-' + d.getDate().toString().padStart(2, '0');
        }
    </script>
</body>
</html>
