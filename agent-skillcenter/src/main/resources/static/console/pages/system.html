<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>系统配置 - SkillCenter</title>
    
    <link rel="stylesheet" href="/skillcenter/console/css/remixicon/remixicon.css">
    <link rel="stylesheet" href="/skillcenter/console/css/theme.css">
    <link rel="stylesheet" href="/skillcenter/console/css/nexus.css">
    <style>
        .system-stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }
        .stat-card {
            background: var(--nx-bg-elevated);
            border-radius: 8px;
            padding: 20px;
            text-align: center;
        }
        .stat-card .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: var(--nx-primary);
        }
        .stat-card .stat-label {
            font-size: 12px;
            color: var(--nx-text-secondary);
            margin-top: 4px;
        }
        .progress-bar {
            width: 100%;
            height: 8px;
            background: var(--nx-border);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 8px;
        }
        .progress-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.3s ease;
        }
        .progress-success { background: var(--nx-success); }
        .progress-warning { background: var(--nx-warning); }
        .progress-danger { background: var(--nx-danger); }
        .progress-primary { background: var(--nx-primary); }
        
        .health-check-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid var(--nx-border);
        }
        .health-check-item:last-child {
            border-bottom: none;
        }
        .health-status-ok { color: var(--nx-success); }
        .health-status-warn { color: var(--nx-warning); }
        .health-status-error { color: var(--nx-danger); }
        
        .config-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid var(--nx-border);
        }
        .config-item:last-child {
            border-bottom: none;
        }
        .config-label {
            color: var(--nx-text-secondary);
            min-width: 150px;
        }
        .config-value {
            font-weight: 500;
        }
        
        .log-level-INFO { color: var(--nx-primary); }
        .log-level-WARN { color: var(--nx-warning); }
        .log-level-ERROR { color: var(--nx-danger); }
        .log-level-DEBUG { color: var(--nx-text-secondary); }
        
        .operation-status-SUCCESS { color: var(--nx-success); }
        .operation-status-FAILED { color: var(--nx-danger); }
        
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
    </style>
</head>
<body>
    <div class="nx-page">
        <aside class="nx-page__sidebar">
            <div class="nx-p-4 nx-mb-4">
                <h1 class="nx-text-lg nx-font-bold" style="display: flex; align-items: center; gap: 8px;">
                    <i class="ri-bolt-line"></i> SkillCenter
                </h1>
            </div>
            <ul class="nav-menu" id="nav-menu"></ul>
        </aside>
        
        <main class="nx-page__content">
            <header class="nx-page__header">
                <div class="nx-flex nx-items-center nx-gap-3">
                    <button class="nx-btn nx-btn--ghost nx-btn--icon" data-nx-sidebar-toggle>
                        <i class="ri-menu-line"></i>
                    </button>
                    <h2 class="nx-text-lg nx-font-semibold">系统配置</h2>
                </div>
                <div class="nx-flex nx-items-center nx-gap-3">
                    <button class="nx-btn nx-btn--ghost nx-btn--icon" data-nx-theme-toggle>
                        <i class="ri-sun-line"></i>
                    </button>
                </div>
            </header>
            
            <div class="nx-page__main">
                <div class="nx-container">
                    <div class="nx-tabs nx-mb-6">
                        <div class="nx-tabs__list">
                            <button class="nx-tabs__tab active" data-tab="status">系统状态</button>
                            <button class="nx-tabs__tab" data-tab="config">系统配置</button>
                            <button class="nx-tabs__tab" data-tab="resources">资源监控</button>
                            <button class="nx-tabs__tab" data-tab="logs">日志管理</button>
                            <button class="nx-tabs__tab" data-tab="operations">操作记录</button>
                        </div>
                    </div>

                    <div id="tab-status" class="tab-content active">
                        <div class="system-stats-grid">
                            <div class="stat-card">
                                <div class="stat-value" id="stat-version">-</div>
                                <div class="stat-label">系统版本</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="stat-uptime">-</div>
                                <div class="stat-label">运行时间</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="stat-status">-</div>
                                <div class="stat-label">系统状态</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="stat-health">-</div>
                                <div class="stat-label">健康状态</div>
                            </div>
                        </div>

                        <div class="nx-card">
                            <div class="nx-card__header nx-flex nx-justify-between nx-items-center">
                                <h3 class="nx-card__title">系统信息</h3>
                                <button class="nx-btn nx-btn--secondary nx-btn--sm" onclick="refreshStatus()">
                                    <i class="ri-refresh-line"></i> 刷新
                                </button>
                            </div>
                            <div class="nx-card__body">
                                <div class="config-item">
                                    <span class="config-label">服务名称</span>
                                    <span class="config-value" id="info-service">-</span>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">版本号</span>
                                    <span class="config-value" id="info-version">-</span>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">供应商</span>
                                    <span class="config-value" id="info-vendor">-</span>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">构建时间</span>
                                    <span class="config-value" id="info-build">-</span>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">Java版本</span>
                                    <span class="config-value" id="info-java">-</span>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">操作系统</span>
                                    <span class="config-value" id="info-os">-</span>
                                </div>
                            </div>
                        </div>

                        <div class="nx-card nx-mt-6">
                            <div class="nx-card__header nx-flex nx-justify-between nx-items-center">
                                <h3 class="nx-card__title">健康检查</h3>
                                <button class="nx-btn nx-btn--secondary nx-btn--sm" onclick="runHealthCheck()">
                                    <i class="ri-heart-pulse-line"></i> 健康检查
                                </button>
                            </div>
                            <div class="nx-card__body">
                                <div id="health-checks">
                                    <div class="health-check-item">
                                        <span>CPU状态</span>
                                        <span id="health-cpu" class="health-status-ok">正常</span>
                                    </div>
                                    <div class="health-check-item">
                                        <span>内存状态</span>
                                        <span id="health-memory" class="health-status-ok">正常</span>
                                    </div>
                                    <div class="health-check-item">
                                        <span>磁盘状态</span>
                                        <span id="health-disk" class="health-status-ok">正常</span>
                                    </div>
                                    <div class="health-check-item">
                                        <span>网络状态</span>
                                        <span id="health-network" class="health-status-ok">正常</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="nx-flex nx-gap-3 nx-mt-6">
                            <button class="nx-btn nx-btn--secondary" onclick="exportReport()">
                                <i class="ri-file-download-line"></i> 导出报告
                            </button>
                            <button class="nx-btn nx-btn--warning" onclick="clearCache()">
                                <i class="ri-delete-bin-line"></i> 清除缓存
                            </button>
                        </div>
                    </div>

                    <div id="tab-config" class="tab-content">
                        <div class="nx-card">
                            <div class="nx-card__header">
                                <h3 class="nx-card__title">基本配置</h3>
                            </div>
                            <div class="nx-card__body">
                                <div class="nx-form-group nx-mb-4">
                                    <label class="nx-label">系统名称</label>
                                    <input type="text" id="config-system-name" class="nx-input" value="SkillCenter" style="max-width: 400px;">
                                </div>
                                <div class="nx-form-group nx-mb-4">
                                    <label class="nx-label">系统描述</label>
                                    <input type="text" id="config-system-desc" class="nx-input" value="技能管理和执行平台" style="max-width: 400px;">
                                </div>
                                <div class="nx-form-group nx-mb-4">
                                    <label class="nx-label">默认语言</label>
                                    <select id="config-language" class="nx-select" style="max-width: 400px;">
                                        <option value="zh-CN">简体中文</option>
                                        <option value="en-US">English</option>
                                    </select>
                                </div>
                                <div class="nx-form-group nx-mb-4">
                                    <label class="nx-label">主题模式</label>
                                    <select id="config-theme" class="nx-select" style="max-width: 400px;">
                                        <option value="dark">深色模式</option>
                                        <option value="light">浅色模式</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="nx-card nx-mt-6">
                            <div class="nx-card__header">
                                <h3 class="nx-card__title">安全配置</h3>
                            </div>
                            <div class="nx-card__body">
                                <div class="nx-form-group nx-mb-4">
                                    <label class="nx-label">会话超时 (分钟)</label>
                                    <input type="number" id="config-session-timeout" class="nx-input" value="30" style="max-width: 200px;">
                                </div>
                                <div class="nx-form-group nx-mb-4">
                                    <label class="nx-label">最大登录失败次数</label>
                                    <input type="number" id="config-max-login-attempts" class="nx-input" value="5" style="max-width: 200px;">
                                </div>
                                <div class="nx-form-group nx-mb-4">
                                    <label class="nx-label">密码最小长度</label>
                                    <input type="number" id="config-min-password-length" class="nx-input" value="8" style="max-width: 200px;">
                                </div>
                                <div class="nx-form-group nx-mb-4">
                                    <label class="nx-label">启用双因素认证</label>
                                    <select id="config-2fa" class="nx-select" style="max-width: 200px;">
                                        <option value="false">否</option>
                                        <option value="true">是</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="nx-flex nx-gap-3 nx-mt-6">
                            <button class="nx-btn nx-btn--primary" onclick="saveConfig()">
                                <i class="ri-save-line"></i> 保存配置
                            </button>
                            <button class="nx-btn nx-btn--ghost" onclick="resetConfig()">
                                <i class="ri-refresh-line"></i> 重置默认
                            </button>
                            <button class="nx-btn nx-btn--secondary" onclick="exportConfig()">
                                <i class="ri-download-line"></i> 导出配置
                            </button>
                            <button class="nx-btn nx-btn--secondary" onclick="importConfig()">
                                <i class="ri-upload-line"></i> 导入配置
                            </button>
                        </div>
                    </div>

                    <div id="tab-resources" class="tab-content">
                        <div class="system-stats-grid">
                            <div class="stat-card">
                                <div class="stat-value" id="res-cpu-cores">-</div>
                                <div class="stat-label">CPU核心数</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="res-memory-used">-</div>
                                <div class="stat-label">已用内存</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="res-memory-total">-</div>
                                <div class="stat-label">总内存</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="res-memory-max">-</div>
                                <div class="stat-label">最大内存</div>
                            </div>
                        </div>

                        <div class="nx-card">
                            <div class="nx-card__header nx-flex nx-justify-between nx-items-center">
                                <h3 class="nx-card__title">内存使用</h3>
                                <button class="nx-btn nx-btn--secondary nx-btn--sm" onclick="refreshResources()">
                                    <i class="ri-refresh-line"></i> 刷新
                                </button>
                            </div>
                            <div class="nx-card__body">
                                <div class="nx-mb-4">
                                    <div class="nx-flex nx-justify-between nx-mb-2">
                                        <span>已用内存</span>
                                        <span id="memory-percent">-</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-fill progress-primary" id="memory-bar" style="width: 0%;"></div>
                                    </div>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">已用内存</span>
                                    <span class="config-value" id="mem-used">-</span>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">空闲内存</span>
                                    <span class="config-value" id="mem-free">-</span>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">总内存</span>
                                    <span class="config-value" id="mem-total">-</span>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">最大可用内存</span>
                                    <span class="config-value" id="mem-max">-</span>
                                </div>
                            </div>
                        </div>

                        <div class="nx-card nx-mt-6">
                            <div class="nx-card__header">
                                <h3 class="nx-card__title">运行时间</h3>
                            </div>
                            <div class="nx-card__body">
                                <div class="config-item">
                                    <span class="config-label">运行时长</span>
                                    <span class="config-value" id="res-uptime">-</span>
                                </div>
                                <div class="config-item">
                                    <span class="config-label">可用处理器</span>
                                    <span class="config-value" id="res-processors">-</span>
                                </div>
                            </div>
                        </div>

                        <div class="nx-flex nx-gap-3 nx-mt-6">
                            <button class="nx-btn nx-btn--warning" onclick="restartSystem()">
                                <i class="ri-restart-line"></i> 重启系统
                            </button>
                            <button class="nx-btn nx-btn--danger" onclick="shutdownSystem()">
                                <i class="ri-shut-down-line"></i> 关闭系统
                            </button>
                        </div>
                    </div>

                    <div id="tab-logs" class="tab-content">
                        <div class="nx-card">
                            <div class="nx-card__header nx-flex nx-justify-between nx-items-center">
                                <h3 class="nx-card__title">系统日志</h3>
                                <div class="nx-flex nx-gap-2">
                                    <select id="log-level-filter" class="nx-select" style="width: 120px;" onchange="loadLogs()">
                                        <option value="">全部级别</option>
                                        <option value="INFO">INFO</option>
                                        <option value="WARN">WARN</option>
                                        <option value="ERROR">ERROR</option>
                                        <option value="DEBUG">DEBUG</option>
                                    </select>
                                    <button class="nx-btn nx-btn--secondary nx-btn--sm" onclick="loadLogs()">
                                        <i class="ri-refresh-line"></i> 刷新
                                    </button>
                                </div>
                            </div>
                            <div class="nx-card__body">
                                <table class="nx-table nx-table--striped">
                                    <thead>
                                        <tr>
                                            <th>时间</th>
                                            <th>级别</th>
                                            <th>来源</th>
                                            <th>消息</th>
                                        </tr>
                                    </thead>
                                    <tbody id="log-table-body">
                                        <tr><td colspan="4" style="text-align: center;">加载中...</td></tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <div class="nx-flex nx-gap-3 nx-mt-6">
                            <button class="nx-btn nx-btn--secondary" onclick="exportLogs()">
                                <i class="ri-download-line"></i> 导出日志
                            </button>
                            <button class="nx-btn nx-btn--danger" onclick="clearLogs()">
                                <i class="ri-delete-bin-line"></i> 清除日志
                            </button>
                        </div>
                    </div>

                    <div id="tab-operations" class="tab-content">
                        <div class="nx-card">
                            <div class="nx-card__header nx-flex nx-justify-between nx-items-center">
                                <h3 class="nx-card__title">操作记录</h3>
                                <button class="nx-btn nx-btn--secondary nx-btn--sm" onclick="loadOperations()">
                                    <i class="ri-refresh-line"></i> 刷新
                                </button>
                            </div>
                            <div class="nx-card__body">
                                <table class="nx-table nx-table--striped">
                                    <thead>
                                        <tr>
                                            <th>时间</th>
                                            <th>类型</th>
                                            <th>描述</th>
                                            <th>状态</th>
                                        </tr>
                                    </thead>
                                    <tbody id="operation-table-body">
                                        <tr><td colspan="4" style="text-align: center;">加载中...</td></tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <div class="nx-flex nx-gap-3 nx-mt-6">
                            <button class="nx-btn nx-btn--secondary" onclick="exportOperations()">
                                <i class="ri-download-line"></i> 导出记录
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="/skillcenter/console/js/theme-manager.js"></script>
    <script src="/skillcenter/console/js/nexus-menu.js"></script>
    <script src="/skillcenter/console/js/page-init.js" data-auto-init></script>
    <script>
        let systemStatus = null;
        let systemConfig = null;
        let systemResources = null;
        let systemLogs = [];
        let systemOperations = [];

        window.onPageInit = function() {
            initTabs();
            loadStatus();
            loadConfig();
            loadResources();
            loadLogs();
            loadOperations();
        };

        function initTabs() {
            document.querySelectorAll('.nx-tabs__tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    document.querySelectorAll('.nx-tabs__tab').forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    
                    this.classList.add('active');
                    const tabId = 'tab-' + this.dataset.tab;
                    document.getElementById(tabId).classList.add('active');
                });
            });
        }

        function postApi(url, data) {
            return fetch(url, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data || {})
            }).then(res => res.json());
        }

        function loadStatus() {
            postApi('/api/system/version').then(res => {
                if (res.code === 200 && res.data) {
                    document.getElementById('stat-version').textContent = res.data.version || '-';
                    document.getElementById('info-version').textContent = res.data.version || '-';
                    document.getElementById('info-service').textContent = res.data.name || '-';
                    document.getElementById('info-vendor').textContent = res.data.vendor || '-';
                    document.getElementById('info-build').textContent = res.data.buildTimestamp || '-';
                }
            });

            postApi('/api/system/status').then(res => {
                if (res.code === 200 && res.data) {
                    systemStatus = res.data;
                    document.getElementById('stat-status').textContent = res.data.status || '-';
                }
            });

            postApi('/api/system/health').then(res => {
                if (res.code === 200 && res.data) {
                    document.getElementById('stat-health').textContent = res.data.status || '-';
                    document.getElementById('health-cpu').textContent = res.data.cpu || '正常';
                    document.getElementById('health-memory').textContent = res.data.memory || '正常';
                    document.getElementById('health-disk').textContent = res.data.disk || '正常';
                    document.getElementById('health-network').textContent = res.data.network || '正常';
                }
            });

            postApi('/api/system/config').then(res => {
                if (res.code === 200 && res.data) {
                    document.getElementById('info-java').textContent = res.data.javaVersion || '-';
                    document.getElementById('info-os').textContent = (res.data.osName || '') + ' ' + (res.data.osVersion || '');
                }
            });
        }

        function loadConfig() {
            postApi('/api/system/config').then(res => {
                if (res.code === 200 && res.data) {
                    systemConfig = res.data;
                }
            });
        }

        function loadResources() {
            postApi('/api/system/resources').then(res => {
                if (res.code === 200 && res.data) {
                    systemResources = res.data;
                    
                    document.getElementById('res-cpu-cores').textContent = res.data.availableProcessors || '-';
                    document.getElementById('res-memory-used').textContent = res.data.usedMemoryHuman || '-';
                    document.getElementById('res-memory-total').textContent = res.data.totalMemoryHuman || '-';
                    document.getElementById('res-memory-max').textContent = res.data.maxMemoryHuman || '-';
                    
                    document.getElementById('res-uptime').textContent = res.data.uptimeHuman || '-';
                    document.getElementById('res-processors').textContent = res.data.availableProcessors || '-';
                    
                    document.getElementById('mem-used').textContent = res.data.usedMemoryHuman || '-';
                    document.getElementById('mem-free').textContent = res.data.freeMemoryHuman || '-';
                    document.getElementById('mem-total').textContent = res.data.totalMemoryHuman || '-';
                    document.getElementById('mem-max').textContent = res.data.maxMemoryHuman || '-';
                    
                    if (res.data.totalMemory > 0) {
                        const percent = Math.round((res.data.usedMemory / res.data.totalMemory) * 100);
                        document.getElementById('memory-percent').textContent = percent + '%';
                        document.getElementById('memory-bar').style.width = percent + '%';
                        
                        if (percent > 80) {
                            document.getElementById('memory-bar').className = 'progress-fill progress-danger';
                        } else if (percent > 60) {
                            document.getElementById('memory-bar').className = 'progress-fill progress-warning';
                        }
                    }
                }
            });
        }

        function loadLogs() {
            const level = document.getElementById('log-level-filter').value;
            postApi('/api/system/logs', { level: level }).then(res => {
                if (res.code === 200 && res.data) {
                    systemLogs = res.data;
                    renderLogs();
                }
            });
        }

        function renderLogs() {
            const tbody = document.getElementById('log-table-body');
            if (!systemLogs || systemLogs.length === 0) {
                tbody.innerHTML = '<tr><td colspan="4" style="text-align: center;">暂无日志</td></tr>';
                return;
            }

            tbody.innerHTML = systemLogs.map(log => {
                const time = new Date(log.timestamp).toLocaleString();
                const levelClass = 'log-level-' + (log.level || 'INFO');
                return `
                    <tr>
                        <td>${time}</td>
                        <td><span class="${levelClass}">${log.level || 'INFO'}</span></td>
                        <td>${log.source || '-'}</td>
                        <td>${log.message || '-'}</td>
                    </tr>
                `;
            }).join('');
        }

        function loadOperations() {
            postApi('/api/system/operations').then(res => {
                if (res.code === 200 && res.data) {
                    systemOperations = res.data;
                    renderOperations();
                }
            });
        }

        function renderOperations() {
            const tbody = document.getElementById('operation-table-body');
            if (!systemOperations || systemOperations.length === 0) {
                tbody.innerHTML = '<tr><td colspan="4" style="text-align: center;">暂无操作记录</td></tr>';
                return;
            }

            tbody.innerHTML = systemOperations.map(op => {
                const time = new Date(op.timestamp).toLocaleString();
                const statusClass = 'operation-status-' + (op.status || 'SUCCESS');
                return `
                    <tr>
                        <td>${time}</td>
                        <td>${op.type || '-'}</td>
                        <td>${op.description || '-'}</td>
                        <td><span class="${statusClass}">${op.status || 'SUCCESS'}</span></td>
                    </tr>
                `;
            }).join('');
        }

        function refreshStatus() {
            loadStatus();
        }

        function refreshResources() {
            loadResources();
        }

        function runHealthCheck() {
            postApi('/api/system/health').then(res => {
                if (res.code === 200) {
                    alert('健康检查完成');
                    loadStatus();
                }
            });
        }

        function exportReport() {
            alert('系统报告导出功能');
        }

        function clearCache() {
            if (confirm('确定要清除系统缓存吗？')) {
                postApi('/api/system/cache/clear').then(res => {
                    if (res.code === 200) {
                        alert('缓存清除成功: ' + (res.data.message || ''));
                    } else {
                        alert('清除失败: ' + res.message);
                    }
                });
            }
        }

        function saveConfig() {
            const config = {
                systemName: document.getElementById('config-system-name').value,
                systemDescription: document.getElementById('config-system-desc').value,
                language: document.getElementById('config-language').value,
                theme: document.getElementById('config-theme').value,
                sessionTimeout: parseInt(document.getElementById('config-session-timeout').value),
                maxLoginAttempts: parseInt(document.getElementById('config-max-login-attempts').value),
                minPasswordLength: parseInt(document.getElementById('config-min-password-length').value),
                enable2FA: document.getElementById('config-2fa').value === 'true'
            };

            postApi('/api/system/config/update', config).then(res => {
                if (res.code === 200) {
                    alert('配置保存成功');
                } else {
                    alert('保存失败: ' + res.message);
                }
            });
        }

        function resetConfig() {
            if (confirm('确定要重置为默认配置吗？')) {
                document.getElementById('config-system-name').value = 'SkillCenter';
                document.getElementById('config-system-desc').value = '技能管理和执行平台';
                document.getElementById('config-language').value = 'zh-CN';
                document.getElementById('config-theme').value = 'dark';
                document.getElementById('config-session-timeout').value = '30';
                document.getElementById('config-max-login-attempts').value = '5';
                document.getElementById('config-min-password-length').value = '8';
                document.getElementById('config-2fa').value = 'false';
                alert('已重置为默认配置');
            }
        }

        function exportConfig() {
            alert('配置导出功能');
        }

        function importConfig() {
            alert('配置导入功能');
        }

        function restartSystem() {
            if (confirm('确定要重启系统吗？')) {
                postApi('/api/system/restart').then(res => {
                    if (res.code === 200) {
                        alert('重启命令已发出');
                    } else {
                        alert('重启失败: ' + res.message);
                    }
                });
            }
        }

        function shutdownSystem() {
            if (confirm('确定要关闭系统吗？此操作不可撤销！')) {
                postApi('/api/system/shutdown').then(res => {
                    if (res.code === 200) {
                        alert('关闭命令已发出');
                    } else {
                        alert('关闭失败: ' + res.message);
                    }
                });
            }
        }

        function exportLogs() {
            alert('日志导出功能');
        }

        function clearLogs() {
            if (confirm('确定要清除所有日志吗？')) {
                postApi('/api/system/logs/clear').then(res => {
                    if (res.code === 200) {
                        alert('日志清除成功');
                        loadLogs();
                    } else {
                        alert('清除失败: ' + res.message);
                    }
                });
            }
        }

        function exportOperations() {
            alert('操作记录导出功能');
        }
    </script>
</body>
</html>
