<svg width="800" height="500" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="800" height="500" fill="#f5f5f5"/>
  
  <!-- Title -->
  <text x="400" y="30" font-family="Arial" font-size="20" font-weight="bold" text-anchor="middle">命令执行流程图</text>
  
  <!-- Step 1: Create Command -->
  <rect x="100" y="60" width="150" height="60" rx="5" fill="#4a90e2" stroke="#357abd" stroke-width="2"/>
  <text x="175" y="95" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle" fill="white">1. 创建命令对象</text>
  <text x="175" y="115" font-family="Arial" font-size="12" text-anchor="middle" fill="white">实例化具体命令类</text>
  
  <!-- Step 2: Build Packet -->
  <rect x="100" y="150" width="150" height="60" rx="5" fill="#50e3c2" stroke="#3cb395" stroke-width="2"/>
  <text x="175" y="185" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle" fill="white">2. 构建命令数据包</text>
  <text x="175" y="205" font-family="Arial" font-size="12" text-anchor="middle" fill="white">使用CommandPacket.Builder</text>
  
  <!-- Step 3: Send Command -->
  <rect x="100" y="240" width="150" height="60" rx="5" fill="#f5a623" stroke="#d88c1c" stroke-width="2"/>
  <text x="175" y="275" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle" fill="white">3. 发送命令</text>
  <text x="175" y="295" font-family="Arial" font-size="12" text-anchor="middle" fill="white">调用UDPSDK.sendCommand()</text>
  
  <!-- Step 4: Receive & Parse -->
  <rect x="450" y="60" width="150" height="60" rx="5" fill="#e95793" stroke="#c44279" stroke-width="2"/>
  <text x="525" y="95" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle" fill="white">4. 接收并解析</text>
  <text x="525" y="115" font-family="Arial" font-size="12" text-anchor="middle" fill="white">UDPSDK接收UDP数据包</text>
  
  <!-- Step 5: Command Routing -->
  <rect x="450" y="150" width="150" height="60" rx="5" fill="#9013fe" stroke="#6a00cd" stroke-width="2"/>
  <text x="525" y="185" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle" fill="white">5. 命令路由</text>
  <text x="525" y="205" font-family="Arial" font-size="12" text-anchor="middle" fill="white">解析CommandType</text>
  
  <!-- Step 6: Execute Command -->
  <rect x="450" y="240" width="150" height="60" rx="5" fill="#7ed321" stroke="#66b01b" stroke-width="2"/>
  <text x="525" y="275" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle" fill="white">6. 执行命令</text>
  <text x="525" y="295" font-family="Arial" font-size="12" text-anchor="middle" fill="white">调用CommandTask.execute()</text>
  
  <!-- Step 7: Generate Response -->
  <rect x="450" y="330" width="150" height="60" rx="5" fill="#bd10e0" stroke="#8a0e9a" stroke-width="2"/>
  <text x="525" y="365" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle" fill="white">7. 生成响应</text>
  <text x="525" y="385" font-family="Arial" font-size="12" text-anchor="middle" fill="white">构建响应结果</text>
  
  <!-- Step 8: Send Response -->
  <rect x="100" y="330" width="150" height="60" rx="5" fill="#f8e71c" stroke="#e6d319" stroke-width="2"/>
  <text x="175" y="365" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle" fill="#333">8. 接收响应</text>
  <text x="175" y="385" font-family="Arial" font-size="12" text-anchor="middle" fill="#333">处理接收到的响应</text>
  
  <!-- Arrows -->
  <!-- Down arrows on left side -->
  <line x1="175" y1="120" x2="175" y2="150" stroke="#333" stroke-width="2"/>
  <polygon points="170,150 180,150 175,155" fill="#333"/>
  
  <line x1="175" y1="210" x2="175" y2="240" stroke="#333" stroke-width="2"/>
  <polygon points="170,240 180,240 175,245" fill="#333"/>
  
  <!-- Right arrow from step 3 to step 4 -->
  <path d="M 250 270 Q 400 270 400 90 L 450 90" stroke="#333" stroke-width="2" fill="none"/>
  <polygon points="450,85 450,95 455,90" fill="#333"/>
  
  <!-- Down arrows on right side -->
  <line x1="525" y1="120" x2="525" y2="150" stroke="#333" stroke-width="2"/>
  <polygon points="520,150 530,150 525,155" fill="#333"/>
  
  <line x1="525" y1="210" x2="525" y2="240" stroke="#333" stroke-width="2"/>
  <polygon points="520,240 530,240 525,245" fill="#333"/>
  
  <line x1="525" y1="300" x2="525" y2="330" stroke="#333" stroke-width="2"/>
  <polygon points="520,330 530,330 525,335" fill="#333"/>
  
  <!-- Left arrow from step 7 to step 8 -->
  <path d="M 450 360 Q 300 360 300 360 L 250 360" stroke="#333" stroke-width="2" fill="none"/>
  <polygon points="250,355 250,365 245,360" fill="#333"/>
  
  <!-- Labels -->
  <text x="400" y="40" font-family="Arial" font-size="12" text-anchor="middle" fill="#666">图2: 命令执行流程</text>
</svg>