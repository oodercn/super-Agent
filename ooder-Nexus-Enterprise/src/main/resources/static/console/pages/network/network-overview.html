<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>网络概览 - Nexus</title>
    <link rel="stylesheet" href="/console/css/remixicon/remixicon.css">
    <link rel="stylesheet" href="/console/css/nexus.css">
    <script src="/console/js/nexus.js"></script>
    <script src="/console/js/nexus-menu.js"></script>
    <script src="/console/js/page-init.js" data-auto-init></script>
</head>
<body>
    <div class="nx-page">
        <aside class="nx-page__sidebar">
            <div class="nx-p-4 nx-mb-4">
                <h1 class="nx-text-lg nx-font-bold" style="display: flex; align-items: center; gap: 8px;">
                    <i class="ri-server-line"></i> Nexus Console
                </h1>
            </div>
            <ul class="nav-menu" id="nav-menu"></ul>
        </aside>
        <main class="nx-page__content">
            <header class="nx-page__header">
                <div class="nx-flex nx-items-center nx-gap-3">
                    <button class="nx-btn nx-btn--ghost nx-btn--icon" data-nx-sidebar-toggle>
                        <i class="ri-menu-line"></i>
                    </button>
                    <h2 class="nx-text-lg nx-font-semibold">网络概览</h2>
                </div>
                <div class="nx-flex nx-items-center nx-gap-3">
                    <button id="mockToggleBtn" class="nx-btn nx-btn--ghost" onclick="toggleMockMode()">
                        <i class="ri-bug-line"></i> 模拟模式
                    </button>
                    <button class="nx-btn nx-btn--ghost nx-btn--icon" data-nx-theme-toggle>
                        <i class="ri-sun-line"></i>
                    </button>
                    <button id="refresh-btn" class="nx-btn nx-btn--primary" onclick="refreshData()">
                        <i class="ri-refresh-line"></i> 刷新数据
                    </button>
                </div>
            </header>
            <div class="nx-page__main">
                <div class="nx-container">
                    <!-- 设备状态概览 -->
                    <div class="grid" style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 20px;">
                        <div class="card status-card">
                            <div class="status-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                                <i class="ri-router-line"></i>
                            </div>
                            <div class="status-value" id="deviceCount">3</div>
                            <div class="status-label">网络设备</div>
                        </div>

                        <div class="card status-card">
                            <div class="status-icon" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);">
                                <i class="ri-wifi-line"></i>
                            </div>
                            <div class="status-value" id="onlineDevices">12</div>
                            <div class="status-label">在线设备</div>
                        </div>

                        <div class="card status-card">
                            <div class="status-icon" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);">
                                <i class="ri-speed-line"></i>
                            </div>
                            <div class="status-value" id="bandwidthUsage">45%</div>
                            <div class="status-label">带宽使用</div>
                        </div>

                        <div class="card status-card">
                            <div class="status-icon" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                                <i class="ri-shield-check-line"></i>
                            </div>
                            <div class="status-value" id="securityStatus">正常</div>
                            <div class="status-label">安全状态</div>
                        </div>
                    </div>

                    <!-- 连接状态卡片 -->
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title"><i class="ri-router-line"></i> 设备连接状态</h2>
                            <span id="connectionStatus" class="status-badge status-online">已连接</span>
                        </div>
                        <div id="deviceInfo">
                            <div class="grid" style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); margin-top: 15px;">
                                <div class="info-item">
                                    <span class="info-label">设备地址</span>
                                    <span id="deviceHost" class="info-value">192.168.1.1</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">固件版本</span>
                                    <span id="firmwareVersion" class="info-value">OpenWrt 21.02.3</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">运行时间</span>
                                    <span id="uptime" class="info-value">15天 3小时</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">设备型号</span>
                                    <span id="deviceModel" class="info-value">Xiaomi AX3600</span>
                                </div>
                            </div>
                        </div>
                        <div class="action-buttons" style="margin-top: 20px; display: flex; gap: 10px;">
                            <button id="disconnectBtn" class="btn btn-danger" onclick="disconnectDevice()">
                                <i class="ri-unlink"></i> 断开连接
                            </button>
                            <button id="rebootBtn" class="btn btn-warning" onclick="rebootDevice()">
                                <i class="ri-restart-line"></i> 重启设备
                            </button>
                        </div>
                    </div>

                    <!-- 网络拓扑 -->
                    <div class="card" style="margin-top: 20px;">
                        <div class="card-header">
                            <h2 class="card-title"><i class="ri-global-line"></i> 网络拓扑</h2>
                            <button class="btn btn-secondary" onclick="viewFullTopology()">
                                <i class="ri-fullscreen-line"></i> 查看完整拓扑
                            </button>
                        </div>
                        <div class="network-topology" style="height: 300px;">
                            <div class="topology-diagram" style="height: 100%;">
                                <svg width="100%" height="100%" viewBox="0 0 800 250">
                                    <!-- 路由器 -->
                                    <circle cx="400" cy="50" r="30" fill="var(--nx-primary)" stroke="var(--ns-dark)" stroke-width="2" />
                                    <text x="400" y="55" text-anchor="middle" fill="white" font-size="14" font-weight="600">路由器</text>

                                    <!-- 交换机 -->
                                    <rect x="300" y="120" width="200" height="40" rx="5" fill="var(--ns-secondary)" stroke="var(--ns-dark)" stroke-width="2" />
                                    <text x="400" y="145" text-anchor="middle" fill="white" font-size="14" font-weight="600">交换机</text>

                                    <!-- 设备1 -->
                                    <rect x="150" y="200" width="100" height="30" rx="5" fill="var(--ns-success)" stroke="var(--ns-dark)" stroke-width="2" />
                                    <text x="200" y="220" text-anchor="middle" fill="white" font-size="12">PC 1</text>

                                    <!-- 设备2 -->
                                    <rect x="300" y="200" width="100" height="30" rx="5" fill="var(--ns-success)" stroke="var(--ns-dark)" stroke-width="2" />
                                    <text x="350" y="220" text-anchor="middle" fill="white" font-size="12">PC 2</text>

                                    <!-- 设备3 -->
                                    <rect x="450" y="200" width="100" height="30" rx="5" fill="var(--ns-warning)" stroke="var(--ns-dark)" stroke-width="2" />
                                    <text x="500" y="220" text-anchor="middle" fill="white" font-size="12">打印机</text>

                                    <!-- 设备4 -->
                                    <rect x="600" y="200" width="100" height="30" rx="5" fill="var(--ns-danger)" stroke="var(--ns-dark)" stroke-width="2" />
                                    <text x="650" y="220" text-anchor="middle" fill="white" font-size="12">NAS</text>

                                    <!-- 连接线 -->
                                    <line x1="400" y1="80" x2="400" y2="120" stroke="var(--ns-dark)" stroke-width="2" />
                                    <line x1="300" y1="160" x2="200" y2="200" stroke="var(--ns-dark)" stroke-width="2" />
                                    <line x1="350" y1="160" x2="350" y2="200" stroke="var(--ns-dark)" stroke-width="2" />
                                    <line x1="450" y1="160" x2="500" y2="200" stroke="var(--ns-dark)" stroke-width="2" />
                                    <line x1="500" y1="160" x2="650" y2="200" stroke="var(--ns-dark)" stroke-width="2" />
                                </svg>
                            </div>
                        </div>
                    </div>

                    <!-- 快捷操作 -->
                    <h3 style="margin: 30px 0 15px; color: var(--ns-dark);">快捷操作</h3>
                    <div class="grid" style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                        <div class="card status-card" onclick="navigateTo('network-config')" style="cursor: pointer;">
                            <div class="status-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                                <i class="ri-settings-3-line"></i>
                            </div>
                            <div class="status-value">网络配置</div>
                            <div class="status-label">配置网络参数</div>
                        </div>
                        <div class="card status-card" onclick="navigateTo('ip-management')" style="cursor: pointer;">
                            <div class="status-icon" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                                <i class="ri-computer-line"></i>
                            </div>
                            <div class="status-value">IP地址管理</div>
                            <div class="status-label">管理IP地址分配</div>
                        </div>
                        <div class="card status-card" onclick="navigateTo('device-assets')" style="cursor: pointer;">
                            <div class="status-icon" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                                <i class="ri-list-check"></i>
                            </div>
                            <div class="status-value">设备资产</div>
                            <div class="status-label">查看网络设备</div>
                        </div>
                        <div class="card status-card" onclick="navigateTo('traffic-monitor')" style="cursor: pointer;">
                            <div class="status-icon" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);">
                                <i class="ri-equalizer-line"></i>
                            </div>
                            <div class="status-value">流量监控</div>
                            <div class="status-label">监控带宽使用</div>
                        </div>
                        <div class="card status-card" onclick="navigateTo('access-control')" style="cursor: pointer;">
                            <div class="status-icon" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);">
                                <i class="ri-shield-cross-line"></i>
                            </div>
                            <div class="status-value">访问控制</div>
                            <div class="status-label">管理访问权限</div>
                        </div>
                        <div class="card status-card" onclick="navigateTo('remote-terminal')" style="cursor: pointer;">
                            <div class="status-icon" style="background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);">
                                <i class="ri-terminal-line"></i>
                            </div>
                            <div class="status-value">远程终端</div>
                            <div class="status-label">执行远程命令</div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="/console/js/pages/network-overview.js"></script>
</body>
</html>
