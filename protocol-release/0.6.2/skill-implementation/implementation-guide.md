# Skill åè®®æ ˆå‚è€ƒå®ç°æŒ‡å?
## 1. æ–‡æ¡£æ¦‚è¿°

æœ¬æ–‡æ¡£æä¾›äº† Ooder AI Bridge åè®® v0\.6\.2 ä¸?Skill åè®®æ ˆçš„å‚è€ƒå®ç°æŒ‡å—ï¼ŒåŒ…æ‹¬æŠ€æœ¯é€‰å‹ã€æ¶æ„è®¾è®¡ã€å®ç°æ­¥éª¤å’Œæœ€ä½³å®è·µç­‰å†…å®¹ã€?
## 2. æŠ€æœ¯é€‰å‹

### 2.1 ç¼–ç¨‹è¯­è¨€

| è¯­è¨€ | ç‰ˆæœ¬ | ä¼˜åŠ¿ | é€‚ç”¨åœºæ™¯ |
|------|------|------|----------|
| Python | 3.9+ | å¼€å‘æ•ˆç‡é«˜ã€ç”Ÿæ€ä¸°å¯?| å¿«é€Ÿå¼€å‘ã€æ•°æ®å¤„ç?|
| Go | 1.18+ | æ€§èƒ½ä¼˜å¼‚ã€å¹¶å‘æ”¯æŒå¥½ | é«˜å¹¶å‘ã€é«˜æ€§èƒ½åœºæ™¯ |
| Node.js | 16+ | å¼‚æ­¥ç¼–ç¨‹ã€å‰ç«¯å‹å¥?| å®æ—¶é€šä¿¡ã€å‰åç«¯ä¸€ä½“åŒ– |
| Java | 11+ | æˆç†Ÿç¨³å®šã€ç”Ÿæ€å®Œå–?| ä¼ä¸šçº§åº”ç”¨ã€å¤§è§„æ¨¡ç³»ç»Ÿ |

### 2.2 æ¡†æ¶ä¸åº“

| ç±»å‹ | æ¨èæŠ€æœ?| ç‰ˆæœ¬ | ä¼˜åŠ¿ |
|------|----------|------|------|
| Web æ¡†æ¶ | FastAPI | 0.89+ | Python é«˜æ€§èƒ½æ¡†æ¶ã€è‡ªåŠ¨ç”Ÿæˆ?API æ–‡æ¡£ |
| Web æ¡†æ¶ | Gin | 1.8+ | Go é«˜æ€§èƒ½æ¡†æ¶ã€è½»é‡çº§ |
| Web æ¡†æ¶ | Express | 4.18+ | Node.js æˆç†Ÿæ¡†æ¶ã€ç”Ÿæ€ä¸°å¯?|
| Web æ¡†æ¶ | Spring Boot | 2.7+ | Java ä¼ä¸šçº§æ¡†æ¶ã€åŠŸèƒ½å…¨é?|
| è®¤è¯ | JWT | - | æ— çŠ¶æ€è®¤è¯ã€æ˜“äºé›†æˆ?|
| åºåˆ—åŒ?| Protobuf | 3+ | é«˜æ•ˆåºåˆ—åŒ–ã€è·¨è¯­è¨€æ”¯æŒ |
| æ—¥å¿— | Log4j2/Logback | - | é«˜æ€§èƒ½æ—¥å¿—æ¡†æ¶ |
| é…ç½® | Viper | - | çµæ´»çš„é…ç½®ç®¡ç?|
| ç›‘æ§ | Prometheus + Grafana | - | å¼ºå¤§çš„ç›‘æ§å’Œå¯è§†åŒ?|

### 2.3 æ•°æ®åº?
| ç±»å‹ | æ¨èæŠ€æœ?| ç‰ˆæœ¬ | ä¼˜åŠ¿ |
|------|----------|------|------|
| å…³ç³»å?| PostgreSQL | 14+ | åŠŸèƒ½å…¨é¢ã€æ€§èƒ½ä¼˜å¼‚ |
| å…³ç³»å?| MySQL | 8+ | æˆç†Ÿç¨³å®šã€ç”Ÿæ€ä¸°å¯?|
| å†…å­˜å?| Redis | 6+ | é«˜é€Ÿç¼“å­˜ã€ä¼šè¯ç®¡ç?|
| æ–‡æ¡£å?| MongoDB | 5+ | çµæ´»çš„æ•°æ®æ¨¡å?|

## 3. æ¶æ„è®¾è®¡

### 3.1 æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”?    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”?    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”?â”? API å±?       â”‚â”€â”€â”€â”€â–¶â”‚  ä¸šåŠ¡é€»è¾‘å±?   â”‚â”€â”€â”€â”€â–¶â”‚  æ•°æ®è®¿é—®å±?   â”?â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”?    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”?    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”?        â–?                      â–?                      â–?        â”?                      â”?                      â”?        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”?                                â”?                                â–?                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”?                        â”? å·¥å…·ä¸æœåŠ¡å±‚  â”?                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”?```

### 3.2 æ¨¡å—åˆ’åˆ†

| æ¨¡å—åç§° | ä¸»è¦èŒè´£ | å®ç°å»ºè®® |
|----------|----------|----------|
| api | æä¾› RESTful API æ¥å£ | ä½¿ç”¨ Web æ¡†æ¶å®ç°ï¼Œå¦‚ FastAPIã€Gin ç­?|
| service | å®ç°ä¸šåŠ¡é€»è¾‘ | é‡‡ç”¨æœåŠ¡å±‚æ¨¡å¼ï¼Œåˆ†ç¦»ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®è®¿é—?|
| repository | æ•°æ®è®¿é—® | é‡‡ç”¨ä»“åº“æ¨¡å¼ï¼Œå°è£…æ•°æ®åº“æ“ä½œ |
| model | æ•°æ®æ¨¡å‹ | å®šä¹‰å®ä½“ç±»å’Œæ•°æ®ä¼ è¾“å¯¹è±¡(DTO) |
| config | é…ç½®ç®¡ç† | ä½¿ç”¨é…ç½®æ¡†æ¶ï¼Œå¦‚ Viperã€Spring Config ç­?|
| utils | å·¥å…·ç±?| æä¾›é€šç”¨å·¥å…·æ–¹æ³• |
| middleware | ä¸­é—´ä»?| å®ç°è®¤è¯ã€æˆæƒã€æ—¥å¿—ç­‰æ¨ªåˆ‡å…³æ³¨ç‚?|
| monitor | ç›‘æ§ | å®ç°æ€§èƒ½ç›‘æ§ã€å¥åº·æ£€æŸ¥ç­‰ |
| security | å®‰å…¨ | å®ç°è®¤è¯ã€æˆæƒã€åŠ å¯†ç­‰å®‰å…¨åŠŸèƒ½ |

## 4. å®ç°æ­¥éª¤

### 4.1 é¡¹ç›®åˆå§‹åŒ?
1. **é€‰æ‹©ç¼–ç¨‹è¯­è¨€å’Œæ¡†æ?*
   ```bash
   # Python + FastAPI
   pip install fastapi uvicorn
   
   # Go + Gin
   go mod init skill-example
   go get -u github.com/gin-gonic/gin
   
   # Node.js + Express
   npm init -y
   npm install express
   ```

2. **åˆ›å»ºé¡¹ç›®ç»“æ„**
   ```
   skill-example/
   â”œâ”€â”€ api/              # API å±?   â”œâ”€â”€ service/          # ä¸šåŠ¡é€»è¾‘å±?   â”œâ”€â”€ repository/       # æ•°æ®è®¿é—®å±?   â”œâ”€â”€ model/            # æ•°æ®æ¨¡å‹
   â”œâ”€â”€ config/           # é…ç½®ç®¡ç†
   â”œâ”€â”€ utils/            # å·¥å…·ç±?   â”œâ”€â”€ middleware/       # ä¸­é—´ä»?   â”œâ”€â”€ monitor/          # ç›‘æ§
   â”œâ”€â”€ security/         # å®‰å…¨
   â”œâ”€â”€ main.py           # å…¥å£æ–‡ä»¶
   â””â”€â”€ README.md         # é¡¹ç›®è¯´æ˜
   ```

### 4.2 é…ç½®ç®¡ç†

1. **åˆ›å»ºé…ç½®æ–‡ä»¶**
   ```yaml
   # config.yaml
   app:
     name: "skill-example"
     version: "0.1.0"
     host: "0.0.0.0"
     port: 8000
     debug: false
   
   ai_bridge:
     protocol_version: "0\.6\.2"
     registry_url: "http://localhost:8080"
     heartbeat_interval: 30
   
   database:
     url: "postgresql://user:password@localhost:5432/skill_db"
     pool_size: 10
   
   security:
     jwt_secret: "your-secret-key"
     jwt_expiry: 3600
   ```

2. **åŠ è½½é…ç½®**
   ```python
   # config/config.py
   from pydantic import BaseSettings
   
   class Settings(BaseSettings):
       app: dict
       ai_bridge: dict
       database: dict
       security: dict
       
       class Config:
           env_file = "config.yaml"
   
   settings = Settings()
   ```

### 4.3 æ•°æ®æ¨¡å‹å®ç°

1. **å®šä¹‰å®ä½“ç±?*
   ```python
   # model/skill.py
   from datetime import datetime
   from typing import List, Optional
   from pydantic import BaseModel, Field
   
   class Skill(BaseModel):
       skill_id: str = Field(..., description="Skill å”¯ä¸€æ ‡è¯†ç¬?)
       name: str = Field(..., description="Skill åç§°")
       description: Optional[str] = Field(None, description="Skill æè¿°")
       version: str = Field(..., description="Skill ç‰ˆæœ¬")
       status: str = Field(..., description="Skill çŠ¶æ€?)
       created_at: datetime = Field(..., description="åˆ›å»ºæ—¶é—´")
       updated_at: datetime = Field(..., description="æ›´æ–°æ—¶é—´")
       
   class Endpoint(BaseModel):
       url: str = Field(..., description="Endpoint URL")
       protocol: str = Field(..., description="åè®®ç±»å‹")
       weight: int = Field(1, description="æƒé‡")
   ```

### 4.4 API å®ç°

1. **å®šä¹‰ API è·¯ç”±**
   ```python
   # api/skill.py
   from fastapi import APIRouter, Depends, HTTPException
   from typing import List
   from model.skill import Skill, Endpoint
   from service.skill_service import SkillService
   
   router = APIRouter(prefix="/api/v1/skills", tags=["skills"])
   
   @router.get("/", response_model=List[Skill])
   async def get_skills(skill_service: SkillService = Depends(SkillService)):
       return await skill_service.get_all_skills()
   
   @router.get("/{skill_id}", response_model=Skill)
   async def get_skill(skill_id: str, skill_service: SkillService = Depends(SkillService)):
       skill = await skill_service.get_skill_by_id(skill_id)
       if not skill:
           raise HTTPException(status_code=404, detail="Skill not found")
       return skill
   ```

### 4.5 ä¸šåŠ¡é€»è¾‘å®ç°

1. **å®ç°æœåŠ¡å±?*
   ```python
   # service/skill_service.py
   from typing import List, Optional
   from model.skill import Skill, Endpoint
   from repository.skill_repository import SkillRepository
   
   class SkillService:
       def __init__(self, skill_repo: SkillRepository = Depends(SkillRepository)):
           self.skill_repo = skill_repo
       
       async def get_all_skills(self) -> List[Skill]:
           return await self.skill_repo.get_all()
       
       async def get_skill_by_id(self, skill_id: str) -> Optional[Skill]:
           return await self.skill_repo.get_by_id(skill_id)
   ```

### 4.6 æ•°æ®è®¿é—®å±‚å®ç?
1. **å®ç°ä»“åº“å±?*
   ```python
   # repository/skill_repository.py
   from typing import List, Optional
   from sqlalchemy.orm import Session
   from model.skill import Skill
   from database import get_db
   
   class SkillRepository:
       def __init__(self, db: Session = Depends(get_db)):
           self.db = db
       
       async def get_all(self) -> List[Skill]:
           return self.db.query(Skill).all()
       
       async def get_by_id(self, skill_id: str) -> Optional[Skill]:
           return self.db.query(Skill).filter(Skill.skill_id == skill_id).first()
   ```

### 4.7 å®‰å…¨å®ç°

1. **è®¤è¯ä¸­é—´ä»?*
   ```python
   # middleware/auth.py
   from fastapi import Depends, HTTPException, status
   from fastapi.security import HTTPBearer, HTTPAuthorizationCredentials
   from jose import JWTError, jwt
   from config import settings
   
   security = HTTPBearer()
   
   def get_current_user(credentials: HTTPAuthorizationCredentials = Depends(security)):
       token = credentials.credentials
       try:
           payload = jwt.decode(token, settings.security["jwt_secret"], algorithms=["HS256"])
           user_id: str = payload.get("sub")
           if user_id is None:
               raise HTTPException(
                   status_code=status.HTTP_401_UNAUTHORIZED,
                   detail="Could not validate credentials"
               )
           return user_id
       except JWTError:
           raise HTTPException(
               status_code=status.HTTP_401_UNAUTHORIZED,
               detail="Could not validate credentials"
           )
   ```

### 4.8 ç›‘æ§ä¸æ—¥å¿?
1. **æ—¥å¿—é…ç½®**
   ```python
   # config/logging.py
   import logging
   import logging.config
   
   LOGGING_CONFIG = {
       'version': 1,
       'disable_existing_loggers': False,
       'formatters': {
           'standard': {
               'format': '%(asctime)s - %(name)s - %(levelname)s - %(message)s'
           },
       },
       'handlers': {
           'console': {
               'class': 'logging.StreamHandler',
               'formatter': 'standard',
               'level': 'INFO',
           },
           'file': {
               'class': 'logging.handlers.RotatingFileHandler',
               'filename': 'app.log',
               'formatter': 'standard',
               'level': 'DEBUG',
               'maxBytes': 10485760,
               'backupCount': 10,
           },
       },
       'loggers': {
           '': {
               'handlers': ['console', 'file'],
               'level': 'DEBUG',
               'propagate': True
           },
       }
   }
   
   logging.config.dictConfig(LOGGING_CONFIG)
   ```

## 4. æœ€ä½³å®è·?
### 4.1 ä»£ç è´¨é‡

1. **ä»£ç é£æ ¼**
   - éµå¾ªè¯­è¨€çš„å®˜æ–¹é£æ ¼æŒ‡å—ï¼ˆå¦?PEP 8 for Python, Go Code Review Commentsï¼?   - ä½¿ç”¨è‡ªåŠ¨åŒ–å·¥å…·è¿›è¡Œä»£ç æ ¼å¼åŒ–ï¼ˆå¦‚ Black for Python, gofmt for Goï¼?
2. **ä»£ç å®¡æŸ¥**
   - å»ºç«‹ä»£ç å®¡æŸ¥æœºåˆ¶ï¼Œç¡®ä¿ä»£ç è´¨é‡?   - ä½¿ç”¨é™æ€ä»£ç åˆ†æå·¥å…·ï¼ˆå¦?pylint, flake8 for Python; golint for Goï¼?
3. **æµ‹è¯•**
   - ç¼–å†™å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•å’Œç«¯åˆ°ç«¯æµ‹è¯?   - ä½¿ç”¨æµ‹è¯•æ¡†æ¶ï¼ˆå¦‚ pytest for Python, Go testing package for Goï¼?   - ç›®æ ‡æµ‹è¯•è¦†ç›–ç‡è¾¾åˆ?80% ä»¥ä¸Š

### 4.2 æ€§èƒ½ä¼˜åŒ–

1. **ç¼“å­˜ç­–ç•¥**
   - ä½¿ç”¨ Redis ç­‰ç¼“å­˜æŠ€æœ¯å‡å°‘æ•°æ®åº“è®¿é—®
   - å®ç°åˆç†çš„ç¼“å­˜å¤±æ•ˆæœºåˆ?
2. **å¼‚æ­¥ç¼–ç¨‹**
   - å¯¹äº I/O å¯†é›†å‹æ“ä½œï¼Œä½¿ç”¨å¼‚æ­¥ç¼–ç¨‹æé«˜å¹¶å‘æ€§èƒ½
   - Python ä½¿ç”¨ async/awaitï¼ŒGo ä½¿ç”¨ goroutineï¼ŒNode.js ä½¿ç”¨ Promise/async

3. **æ•°æ®åº“ä¼˜åŒ?*
   - åˆç†è®¾è®¡æ•°æ®åº“ç´¢å¼?   - ä½¿ç”¨è¿æ¥æ± ç®¡ç†æ•°æ®åº“è¿æ¥
   - é¿å… N+1 æŸ¥è¯¢é—®é¢˜

### 4.3 å®‰å…¨è€ƒè™‘

1. **è®¤è¯ä¸æˆæ?*
   - å®ç°æœ€å°æƒé™åŸåˆ?   - ä½¿ç”¨ HTTPS ä¿æŠ¤ä¼ è¾“å±‚å®‰å…?   - å®šæœŸæ›´æ¢å¯†é’¥å’Œå‡­è¯?
2. **è¾“å…¥éªŒè¯**
   - å¯¹æ‰€æœ‰è¾“å…¥è¿›è¡Œä¸¥æ ¼éªŒè¯?   - ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢é˜²æ­?SQL æ³¨å…¥
   - å¯¹ç”¨æˆ·è¾“å…¥è¿›è¡Œè½¬ä¹‰é˜²æ­?XSS æ”»å‡»

3. **é”™è¯¯å¤„ç†**
   - ä¸è¦åœ¨é”™è¯¯ä¿¡æ¯ä¸­æ³„éœ²æ•æ„Ÿä¿¡æ¯
   - å®ç°ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æœºåˆ?   - è®°å½•è¯¦ç»†çš„é”™è¯¯æ—¥å¿?
## 5. éƒ¨ç½²ä¸è¿ç»?
### 5.1 å®¹å™¨åŒ?
1. **Docker é…ç½®**
   ```dockerfile
   # Dockerfile
   FROM python:3.9-slim
   
   WORKDIR /app
   
   COPY requirements.txt .
   RUN pip install --no-cache-dir -r requirements.txt
   
   COPY . .
   
   EXPOSE 8000
   
   CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "8000"]
   ```

2. **Docker Compose**
   ```yaml
   # docker-compose.yml
   version: "3"
   services:
     skill-service:
       build: .
       ports:
         - "8000:8000"
       depends_on:
         - db
       environment:
         - DATABASE_URL=postgresql://user:password@db:5432/skill_db
     
     db:
       image: postgres:14
       environment:
         - POSTGRES_USER=user
         - POSTGRES_PASSWORD=password
         - POSTGRES_DB=skill_db
       volumes:
         - postgres_data:/var/lib/postgresql/data
   
   volumes:
     postgres_data:
   ```

### 5.2 ç›‘æ§ä¸å‘Šè­?
1. **æ€§èƒ½ç›‘æ§**
   - ä½¿ç”¨ Prometheus æ”¶é›†æŒ‡æ ‡
   - ä½¿ç”¨ Grafana å¯è§†åŒ–ç›‘æ§æ•°æ?   - ç›‘æ§å…³é”®æŒ‡æ ‡ï¼šè¯·æ±‚æ•°ã€å“åº”æ—¶é—´ã€é”™è¯¯ç‡ã€èµ„æºä½¿ç”¨ç‡ç­?
2. **æ—¥å¿—ç®¡ç†**
   - ä½¿ç”¨ ELK Stack æˆ?Loki è¿›è¡Œæ—¥å¿—æ”¶é›†å’Œåˆ†æ?   - å®ç°æ—¥å¿—åˆ†çº§å’Œå½’æ¡?   - è®¾ç½®æ—¥å¿—å‘Šè­¦è§„åˆ™

3. **å¥åº·æ£€æŸ?*
   - å®ç°å¥åº·æ£€æŸ¥ç«¯ç‚?   - å®šæœŸæ£€æŸ¥æœåŠ¡çŠ¶æ€?   - è®¾ç½®å¥åº·çŠ¶æ€å‘Šè­?
## 6. å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡?
### 6.1 è¿æ¥é—®é¢˜

| é—®é¢˜ | è§£å†³æ–¹æ¡ˆ |
|------|----------|
| è¿æ¥è¶…æ—¶ | æ£€æŸ¥ç½‘ç»œé…ç½®ã€é˜²ç«å¢™è®¾ç½®ã€å¢åŠ è¶…æ—¶æ—¶é—?|
| è¿æ¥å¤±è´¥ | æ£€æŸ¥æœåŠ¡åœ°å€ã€ç«¯å£æ˜¯å¦æ­£ç¡®ï¼ŒæœåŠ¡æ˜¯å¦å¯åŠ¨ |
| è®¤è¯å¤±è´¥ | æ£€æŸ¥è®¤è¯ä¿¡æ¯æ˜¯å¦æ­£ç¡®ï¼Œä»¤ç‰Œæ˜¯å¦è¿‡æœŸ |

### 6.2 æ€§èƒ½é—®é¢˜

| é—®é¢˜ | è§£å†³æ–¹æ¡ˆ |
|------|----------|
| å“åº”ç¼“æ…¢ | ä¼˜åŒ–ä»£ç ã€å¢åŠ ç¼“å­˜ã€æ£€æŸ¥æ•°æ®åº“æ€§èƒ½ |
| å†…å­˜æ³„æ¼ | æ£€æŸ¥èµ„æºé‡Šæ”¾æƒ…å†µã€ä½¿ç”¨å†…å­˜åˆ†æå·¥å…?|
| CPU ä½¿ç”¨ç‡é«˜ | ä¼˜åŒ–ç®—æ³•ã€å‡å°‘å¾ªç¯åµŒå¥—ã€å¢åŠ å¹¶å‘å¤„ç?|

### 6.3 å®‰å…¨é—®é¢˜

| é—®é¢˜ | è§£å†³æ–¹æ¡ˆ |
|------|----------|
| æœªæˆæƒè®¿é—?| åŠ å¼ºè®¤è¯æˆæƒæœºåˆ¶ã€å®ç°æœ€å°æƒé™åŸåˆ?|
| æ•°æ®æ³„éœ² | åŠ å¯†æ•æ„Ÿæ•°æ®ã€å®ç°æ•°æ®è®¿é—®æ§åˆ?|
| æ³¨å…¥æ”»å‡» | å¯¹è¾“å…¥è¿›è¡Œä¸¥æ ¼éªŒè¯ã€ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢ |

---

**Ooder Technology Co., Ltd.**
