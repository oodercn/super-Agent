# Skill VFS 专用协议分册

## 1. 协议概述

Skill VFS（Virtual File System）协议是 Ooder 智能体系统中用于技能组件之间文件同步和共享的专用协议。它作为南下协议的扩展，为 Skill 组件提供了集中式文件存储和同步能力。

### 1.1 设计目标

- **集中存储**：提供统一的文件存储中心，实现 Skill 组件间的文件共享
- **自动同步**：支持文件的自动同步和版本管理
- **透明切换**：支持 VFS 与本地存储的透明切换
- **轻量级接口**：提供轻量级的同步接口，便于集成到各种 Skill 组件
- **高可用性**：支持故障转移和本地存储 fallback

## 2. 协议架构

### 2.1 协议定位

Skill VFS 协议是南下协议的重要扩展，位于 Agent 协议和具体 Skill 实现之间：

```
┌────────────────┐     ┌────────────────┐     ┌────────────────┐
│  MCP Agent     │────▶│  Route Agent   │────▶│  Skill VFS     │
└────────────────┘     └────────────────┘     └────────────────┘
                              │                       │
                              │                       │
                              ▼                       ▼
                        ┌────────────────┐     ┌────────────────┐
                        │  End Agent A   │     │  End Agent B   │
                        └────────────────┘     └────────────────┘
```

### 2.2 核心组件

| 组件 | 职责 | 协议类型 |
|------|------|----------|
| Skill VFS | 集中式文件存储服务 | 南下协议扩展 |
| Route Agent | 消息路由和同步命令转发 | 南下协议 |
| End Agent (Skills) | 文件操作和同步客户端 | 南下协议扩展 |

## 3. 通信协议

### 3.1 传输层

Skill VFS 协议基于 HTTP/HTTPS 传输，确保通信的可靠性和安全性：

| 协议 | 适用场景 | 特点 |
|------|----------|------|
| HTTP/HTTPS | 文件同步和管理操作 | 广泛支持、易于调试 |
| WebSocket/WSS |